<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logan Tuttle</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Nav Bar Styling --- */
        .navbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 16px 32px;
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 50px;
            box-shadow: 0 0 30px rgba(0,163,255,0.2), 0 4px 20px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 100;
            font-family: 'Roboto Mono', monospace;
            transition: all 0.3s ease;
            max-width: 95%;
            width: max-content;
        }

        .navbar:hover {
            box-shadow: 0 0 40px rgba(0,163,255,0.35), 0 6px 25px rgba(0,0,0,0.6);
            border-color: rgba(0,163,255,0.5);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--matrix-blue);
            text-decoration: none;
            letter-spacing: 2px;
            transition: all 0.3s ease;
        }
        
        .nav-brand:hover {
            color: #00ffaa;
            transform: translateY(-2px);
        }
        
        .nav-brand svg {
            width: 24px;
            height: 24px;
            fill: var(--matrix-blue);
            filter: drop-shadow(0 0 5px var(--matrix-blue));
        }
        /* Custom LT monogram logo styling */
        .nav-brand .lt-logo { 
            width: 34px; 
            height: 34px; 
            display: block; 
        }
        .nav-brand .lt-logo g { 
            stroke-linecap: round; 
            stroke-linejoin: round; 
        }
        /* Removed glow and pulse, so keyframes are no longer needed */

        .nav-links {
            list-style: none;
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: #e8f1ff;
            text-decoration: none;
            font-size: 0.9rem;
            letter-spacing: 1px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            will-change: transform, color;
            display: inline-block;
        }

        .nav-links a:hover {
            color: white;
            background: rgba(0,163,255,0.1);
            transform: translateY(-2px);
        }

        /* External link arrow styling (northeast arrow next to external links like LinkedIn) */
        .nav-links a.external {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .external-link-icon {
            display: inline-block;
            width: 14px;
            height: 14px;
            margin-left: 1px;
            opacity: 1;
            transition: all 0.3s ease;
            vertical-align: middle;
        }

        .nav-links a.external:hover .external-link-icon {
            transform: translate(2px, -2px);
        }

        /* Active nav link (scrollspy) */
        .nav-links a.active {
            color: #00ffaa;
            background: rgba(0,163,255,0.1);
            transform: translateY(-2px);
        }

        .nav-links a:focus-visible,
        .nav-brand:focus-visible {
            outline: 2px solid rgba(102,179,255,0.18);
            outline-offset: 3px;
        }

        /* Respect users who prefer reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .nav-links a,
            .nav-brand {
                transition: none !important;
            }
            .nav-brand:hover,
            .nav-links a:hover,
            .nav-brand:focus,
            .nav-links a:focus {
                transform: none !important;
            }
        }

        /* Responsive navbar styling */
        
        /* Medium screens: adjust navbar layout */
        @media (max-width: 1024px) {
            .navbar {
                gap: 16px;
                padding: 12px 24px;
            }

            .nav-brand {
                font-size: 1rem;
            }

            .nav-links {
                gap: 12px;
            }

            .nav-links a {
                font-size: 0.85rem;
                padding: 6px 10px;
            }
        }

        /* Smaller screens: wrap navbar into two rows */
        @media (max-width: 900px) {
            .navbar {
                flex-wrap: wrap;
                justify-content: center;
                padding: 14px 20px;
                gap: 12px;
            }

        /* Override: enlarge top spacing above ID card for narrower viewports
           The existing @media (max-width: 900px) rules (earlier in file) reduced
           overall padding, which made the ID card feel cramped beneath the navbar.
           We add a later (thus higher-specificity by cascade order) media query
           that only adjusts the top padding to create a larger visual gap. */
        @media (max-width: 900px) {
            .layout-wrapper {
                /* Provide a generous gap while keeping it responsive to viewport height */
                padding-top: clamp(130px, 18vh, 240px) !important;
            }
        }

            .nav-brand {
                width: 100%;
                justify-content: center;
                margin-bottom: 6px;
            }

            .nav-links {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
            }

            .nav-links a {
                font-size: 0.8rem;
                padding: 6px 10px;
            }
            
            /* Increase top padding to create larger gap above ID card */
            .layout-wrapper {
                padding-top: clamp(280px, 35vh, 450px);
            }
        }

        @media (max-width: 768px) {
            .navbar {
                width: 95%;
            }
        }

        /* Mobile screens: more compact navbar */
        @media (max-width: 600px) {
            .navbar {
                top: 10px;
                padding: 12px 16px;
                gap: 10px;
                width: 95%;
            }

            .nav-brand {
                font-size: 0.9rem;
                letter-spacing: 1px;
            }

            .nav-brand .lt-logo {
                width: 28px;
                height: 28px;
            }

            .nav-links {
                gap: 6px;
            }

            .nav-links a {
                font-size: 0.75rem;
                padding: 5px 8px;
                letter-spacing: 0.5px;
            }

            .external-link-icon {
                width: 12px;
                height: 12px;
            }
        }

        /* Very small screens: ultra compact */
        @media (max-width: 450px) {
            .navbar {
                padding: 10px 12px;
            }

            .nav-brand {
                font-size: 0.85rem;
            }

            .nav-links a {
                font-size: 0.7rem;
                padding: 4px 6px;
            }
        }

        /* --- Root Variables (Color Palette from your file) --- */
        :root {
            --matrix-blue: #003fff;
            --dark-bg: #070a12;
            --light-grey: #c5c5c5;
            /* unified gap between major components (ID card, Location, Profile) */
            --component-gap: 20px;
            /* consistent vertical spacing between major sections */
            --section-gap: 48px;
            /* Base canvas dimensions for the full layout before responsive scaling */
            --design-width: 1450px;
            --design-height: 2400px;
            /* Keep the ID card sized against the design width; transform scaling handles responsiveness */
            /* Reduced width to match other components (design width - 56px for padding) */
            --card-base-width: calc(var(--design-width) - 56px);
            /* Base height for the card (preserves aspect as the layout scales) */
            --card-base-height: 480px;
            /* Use a 1:1 scale by default; hover states can still expand this */
            --card-scale: 1;
            --card-effective-scale: var(--card-scale);
            /* Global scale factor applied via layout wrapper */
            --page-scale: 1;
            --layout-height: 100vh;
            --scale-gap: 0px;
        }

        /* --- Basic Setup --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            /* Allow scrolling so the page can grow taller and be scrolled
               while leaving the matrix canvas fixed behind the content */
            overflow-y: auto;
            overflow-x: hidden;
            min-height: 100%;
        }

        .layout-wrapper {
            width: 100%;
            /* Reduced top padding on desktop: clamp(min, preferred, max) */
            padding: clamp(64px, 8vh, 80px) clamp(12px, 4vw, 48px) clamp(112px, 18vh, 200px);
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: var(--layout-height, 100vh);
            overflow-x: hidden;
            max-width: 100vw;
        }

        /* Move all content up on smaller screens */
        @media (max-width: 900px) {
            .layout-wrapper {
                padding-top: clamp(120px, 10vh, 100px) !important;
                padding-bottom: clamp(40px, 6vh, 60px) !important;
            }
        }

        #layout-root {
            width: var(--design-width);
            max-width: var(--design-width);
            position: relative;
            margin: 0 auto;
            transform-origin: top center;
            transform: scale(var(--page-scale));
            margin-bottom: calc(-1 * var(--scale-gap));
        }

        /* --- Background Styling (from your file) --- */
        body {
            font-family: 'Roboto Mono', monospace;
            /* Blue light glare gradient background */
            background: linear-gradient(135deg, 
                #000510 0%, 
                #001430 25%, 
                #000a18 50%, 
                #001845 75%, 
                #000510 100%);
            background-attachment: fixed;
            display: flex;
                flex-direction: column;
                align-items: center;
                /* Keep content starting at the top so the document can extend
                    downward and produce a scrollbar when needed */
                justify-content: flex-start;
            padding-top: 48px;
            color: white;
            overflow-x: hidden;
            max-width: 100vw;
        }

        /* --- Matrix Rain Canvas Styling (from your file) --- */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            /* Use viewport height so the canvas consistently covers the
               visible area while scrolling. The canvas is fixed so it will
               remain visible behind content as the page scrolls. */
            height: 100vh;
            z-index: -10; /* Ensure it's behind everything */
            opacity: 0.3; /* Make it more of a background element */
            pointer-events: none; /* Let clicks pass through to the page */
        }

        /* --- Futuristic ID Card Styling --- */
        .id-card-container {
            perspective: 1000px;
            /* Reduced spacing above the card for desktop */
            margin-top: 0;
            margin-bottom: var(--section-gap);
            width: var(--card-base-width);
            height: calc(var(--card-base-height) * var(--card-effective-scale));
            display: flex;
            align-items: center;
            justify-content: center;
            transition: width 0.8s ease, height 0.8s ease;
        }

        /* Further reduce top spacing on smaller screens */
        @media (max-width: 900px) {
            .id-card-container {
                margin-top: -20px;
            }
        }

        /* Shared centered width wrapper so multiple sections align exactly with the ID card */
        .site-width {
            width: var(--design-width);
            margin: 0 auto;
            display: block;
            box-sizing: border-box;
            padding-left: 28px;
            padding-right: 28px;
        }

        .profile-container {
            display: block; /* Change from flex to block to allow float wrapping */
            /* bottom spacing equal to section gap so it matches neighboring panels */
            margin: 0 0 var(--section-gap) 0;
            width: 100%; /* will be constrained by .site-width (matches ID card width) */
            overflow: visible; /* Allow children to overflow */
            position: relative;
        }

        /* Make the projects section stretch full site-width and add consistent padding */
        .projects-section {
            width: 100%; /* constrained by .site-width */
            padding: 28px 28px 36px 28px;
            box-sizing: border-box;
        }

        .id-card-container.border-expanded {
            --card-effective-scale: calc(var(--card-scale) * 1.2);
        }

        /* Fallback: ensure card visually enlarges even if custom property not applied elsewhere */
        .id-card-container.border-expanded .id-card {
            transform: scale(calc(var(--card-effective-scale, 1.2)));
        }

        .id-card {
            width: var(--card-base-width);
            height: var(--card-base-height);
            background: rgba(18, 24, 40, 0.7);
            /* start with a subtler border and inner glow */
            border: 2px solid rgba(0,63,255,0.14);
            border-radius: 15px;
            box-shadow: 0 0 12px rgba(0, 63, 255, 0.12), 0 0 6px rgba(0, 63, 255, 0.06) inset;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: relative;
            padding: 30px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform-origin: center;
            transform: scale(var(--card-effective-scale));
            transition: box-shadow 0.4s ease, transform 0.8s ease;
        }
        
        .id-card:hover {
            box-shadow: 0 0 45px rgba(0, 63, 255, 0.7), 0 0 15px rgba(0, 63, 255, 0.7) inset;
        }

        .id-card-border {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .id-card-border path {
            fill: transparent;
            /* softer border stroke by default */
            stroke: rgba(0, 63, 255, 0.18);
            stroke-width: 4;
            stroke-linejoin: round;
            stroke-linecap: round; /* ensure ends and corners render smoothly */
            stroke-dasharray: var(--border-length, 3200);
            stroke-dashoffset: var(--border-length, 3200);
        }

        .id-card:hover .id-card-border path {
            animation: borderSweep 1.6s ease forwards;
        }

        @keyframes borderSweep {
            0% {
                stroke-dashoffset: var(--border-length, 3200);
                stroke-width: 4;
                stroke: rgba(0, 63, 255, 0.4);
            }
            60% {
                stroke-width: 4;
                stroke: #2a6dff;
            }
            100% {
                stroke-dashoffset: 0;
                stroke-width: 4;
                stroke: #66b3ff;
            }
        }

        /* --- ID Card Content --- */
        .card-content {
            display: flex;
            gap: 30px;
            height: 100%;
            position: relative;
            z-index: 2;
        }

        /* Left Side: Photo and Details */
        .left-panel {
            flex: 0 0 380px; /* increased to allow taller photo-area */
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .photo-area {
            width: 225px;
            height: 420px; /* increased height for taller subject scan */
            margin: 0;
            /* less bright dashed outline initially */
            border: 2px dashed rgba(0,63,255,0.16);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0,0,0,0.2);
            position: relative;
            align-self: flex-start;
            overflow: hidden;
        }

        /* outer framed panel that mimics a printed ID card */
        .photo-frame {
            position: absolute;
            inset: 8px; /* slight inset from the dashed border */
            background: linear-gradient(180deg, rgba(0,20,60,0.82), rgba(0,6,20,0.85));
            border-radius: 6px;
            border: 3px solid rgba(3,10,35,0.5);
            box-shadow: 0 6px 14px rgba(2,24,60,0.45), inset 0 0 12px rgba(0,63,255,0.04);
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: flex-start;
            padding: 8px;
            z-index: 0; /* sits below the photo and overlays */
        }

        .photo-frame .frame-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #9ec9ff;
            font-size: 11px;
            letter-spacing: 1.8px;
            font-weight: 700;
            padding: 2px 6px;
        }

        .photo-frame .frame-inner {
            margin-top: 6px;
            background: linear-gradient(180deg, rgba(4,28,80,0.25), rgba(0,10,30,0.15));
            border: 1px solid rgba(102,179,255,0.06);
            border-radius: 4px;
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        /* inner card glow to match reference neon frame */
        .photo-frame .frame-inner::before {
            content: "";
            position: absolute;
            inset: 4px;
            border-radius: 3px;
            /* softened inner glow */
            box-shadow: 0 0 10px rgba(0,63,255,0.16), 0 0 18px rgba(102,179,255,0.04) inset;
            pointer-events: none;
            z-index: 0;
        }

        /* the actual visible photo/card sits above the frame background but below overlays */
        .photo-card {
            position: relative;
            width: calc(100% - 18px);
            height: calc(100% - 18px);
            background: linear-gradient(180deg, rgba(2,12,36,0.65), rgba(0,6,24,0.8));
            border: 2px solid rgba(0,63,255,0.12);
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .photo-area::before {
            content: "SUBJECT SCAN";
            font-size: 24px;
            font-weight: bold;
            color: var(--matrix-blue);
            letter-spacing: 2px;
        }

        .photo-area svg {
             position: absolute;
             width: 100%;
             height: 100%;
             top:0;
             left:0;
             z-index: 3; /* keep scan overlay above other layers */
             pointer-events: none;
        }

        /* subtle blue / dark-blue overlay that blends the photo into the page aesthetic */
        .photo-area::after {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 2; /* sits above photo but below the scan SVG */
            /* stronger blue-to-dark tint */
            background: linear-gradient(to bottom, rgba(0,63,255,0.40), rgba(3,10,35,0.78));
            mix-blend-mode: multiply; /* darken and add blue cast */
            opacity: 1;
        }

        .photo-area img.profile-photo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            z-index: 1; /* photo sits underneath the overlay and scan */
            /* stronger darkening and desaturation to match the aesthetic */
            filter: contrast(1.06) saturate(0.68) brightness(0.80);
            transform-origin: center;
        }

        .details {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .detail-item {
            /* Increased for readability on the ID card */
            font-size: 16px;
        }

        .detail-item label {
            display: block;
            /* Slightly larger label text to match increased body text */
            font-size: 11px;
            color: var(--light-grey);
            margin-bottom: 6px;
            letter-spacing: 1px;
        }

        /* Increase ID card text size on smaller screens */
        @media (max-width: 900px) {
            .detail-item {
                font-size: 30px;
            }
            
            .detail-item label {
                font-size: 21px;
            }
            
            .card-header h1 {
                font-size: 63px;
            }
            
            .status-label {
                font-size: 36px;
            }
            
            .status {
                font-size: 36px;
            }
            
            .info-grid .detail-item {
                font-size: 30px;
            }
            
            .info-grid .detail-item label {
                font-size: 21px;
            }
        }

        /* Right Side: Header and Info */
        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative; /* ensure children positioned absolute are relative to this panel */
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 1px solid rgba(0, 63, 255, 0.5);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .card-header h1 {
            font-size: 36px; /* bumped up for stronger header presence */
            font-weight: 700;
            /* slightly dim the header on initial render */
            color: rgba(255,255,255,0.92);
            letter-spacing: 4px;
            text-shadow: 0 0 6px rgba(0,63,255,0.12);
            transition: color 180ms ease, text-shadow 220ms ease;
        }

        .status-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-label {
            /* Match the visible 'status' text size so both read as the same weight/scale */
            font-size: 20px; /* changed from 14px */
            font-weight: 700;
            color: var(--light-grey);
            letter-spacing: 1px;
            display: inline-block;
            line-height: 1; /* keep vertical alignment tight with the .status box */
        }

        .status {
            font-size: 20px; /* slightly larger for emphasis */
            font-weight: bold;
            /* intermediate brightness: brighter than the dimmed state but less than full neon */
            color: rgba(0,255,157,0.46); /* increased from 0.22 to 0.46 */
            letter-spacing: 2px;
            text-shadow: 0 0 6px rgba(0,255,157,0.16); /* slightly stronger glow */
            border: 1px solid rgba(0,255,157,0.24);
            padding: 6px 12px;
            border-radius: 5px;
            display: inline-block;
            transition: color 180ms ease, text-shadow 220ms ease, border-color 180ms ease;
        }

        /* When highlighted/hovered, keep the text crisp by removing glow/text-shadow */
        .id-card:hover .card-header h1,
        .id-card:focus-within .card-header h1,
        .id-card:hover .card-header h1:focus,
        .id-card:focus-within .card-header h1:focus {
            color: white;
            /* remove neon glow on highlight */
            text-shadow: none;
        }

        .id-card:hover .status,
        .id-card:focus-within .status,
        .id-card:hover .status:focus,
        .id-card:focus-within .status:focus {
            color: #00ff9d;
            /* remove glow on the status chip when highlighted */
            text-shadow: none;
            border-color: #00ff9d;
            box-shadow: none;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: auto;
        }

        /* --- Decorative Elements --- */
        .card-footer {
            height: 40px;
            /* position the footer relative to the right-panel so its horizontal
               span matches the header inside that panel */
            position: absolute;
            left: 0;
            right: 0;
            bottom: 46px; /* distance from bottom of the right-panel */
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid rgba(0, 63, 255, 0.5);
            padding-top: 15px;
            box-sizing: border-box;
            width: 100%;
        }

        /* --- View Projects Button --- */
        .view-projects-btn {
            position: absolute;
            right: 22px;
            bottom: 22px;
            z-index: 6; /* above card content */
            background: linear-gradient(180deg, #0052ff, #0033cc);
            color: white;
            border: 1px solid rgba(255,255,255,0.08);
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 700;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0, 51, 153, 0.35);
            transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
            opacity: 0.98;
            font-family: 'Roboto Mono', monospace;
            font-size: 24px;
        }

        .view-projects-btn:hover,
        .view-projects-btn:focus-visible {
            /* remove motion; instead add a brighter, slightly blurred glow */
            transform: none;
            filter: brightness(1.18);
            box-shadow: 0 18px 40px rgba(0, 77, 205, 0.45), 0 0 28px rgba(102,179,255,0.18) inset;
            /* subtle backdrop blur to give a soft halo effect behind the button */
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            opacity: 1;
        }

        .view-projects-btn .arrow {
            display: inline-block;
            transform: translateY(1px);
            font-size: 24px;
        }

        /* Barcode removed as requested */

        .corp-logo {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 2px;
            color: var(--matrix-blue);
        }

        /* --- Profile Section Styling --- */
        .profile-container {
            /* Align with ID card width while letting inner content control layout */
            width: 100%;
            margin-top: 0;
            box-sizing: border-box;
        }

        .profile-inner {
            display: flex;
            gap: var(--component-gap);
            align-items: stretch;
        }

        .profile-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .rectangular-component {
            /* make the location panel slightly wider while keeping the globe size constant */
            width: 340px;
            /* make the component more compact by fixing its height and aligning content to the top
               so the lower empty area is removed */
            height: 300px;
            background: rgba(18, 24, 40, 0.7);
            /* dim the initial border and glow for a less bright starting screen */
            border: 2px solid rgba(0,63,255,0.12);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 63, 255, 0.10);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            /* keep header and globe pinned to the top */
            align-items: flex-start;
            justify-content: center;
            padding-top: 8px;
            position: relative;
            overflow: hidden;
        }

        /* Brighten outer blur / glow on hover to match navbar behaviour */
        .rectangular-component:hover,
        .rectangular-component:focus-visible,
        #globe-component:hover,
        #globe-component:focus-visible {
            box-shadow: 0 10px 40px rgba(0, 63, 255, 0.55), 0 0 30px rgba(102,179,255,0.12) inset;
            background: rgba(18, 24, 40, 0.85);
            border-color: rgba(34, 110, 255, 0.85);
            /* slightly stronger backdrop blur so the surroundings look brighter */
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            transform: translateY(-3px) scale(1.02);
            transition: box-shadow 0.24s ease, background 0.24s ease, transform 0.18s ease, border-color 0.24s ease;
        }

        .rectangular-component h2 {
            font-size: 24px;
            color: white;
            letter-spacing: 2px;
            margin: 0;
            /* position the title on the left and vertically center it between
               the top of the component and the top of the globe (globe top = 48px) */
            position: absolute;
            left: 12px;
            top: calc(48px / 2);
            transform: translateY(-50%);
            text-align: left;
            /* match the profile section heading style */
            text-shadow: 0 0 5px var(--matrix-blue);
            z-index: 4; /* sit above globe HUD */
        }

        /* Globe canvas is fixed-size and centered inside the taller component so the border grows but the planet size stays constant */
        .globe-root {
            position: absolute;
            /* keep globe canvas at the original visual size */
            width: 250px; /* fixed visual size */
            height: 250px; /* keep globe itself unchanged */
            /* position the globe near the top of the component so the bottom empty area is cropped */
            top: 48px;
            left: 50%;
            transform: translate(-50%, 0);
            display: block;
            pointer-events: none; /* passive visuals only */
        }

        /* Skeleton loader for globe - shows while Three.js scene is loading */
        .globe-skeleton {
            position: absolute;
            width: 160px;
            height: 160px;
            top: 48px;
            left: 50%;
            transform: translate(-50%, 0);
            margin-top: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(10, 18, 32, 0.95) 0%,
                rgba(0, 63, 255, 0.12) 50%,
                rgba(10, 18, 32, 0.95) 100%);
            overflow: hidden;
            box-shadow: 
                0 0 24px rgba(0, 63, 255, 0.2) inset,
                0 0 60px rgba(0, 63, 255, 0.08);
            z-index: 2;
            transition: opacity 0.6s ease-out;
        }

        /* Animated shimmer effect sweeping across the skeleton */
        .globe-skeleton::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(80, 170, 255, 0.15) 50%,
                transparent 100%
            );
            animation: shimmer 2.5s infinite ease-in-out;
            transform: rotate(45deg);
        }

        /* Pulsing glow effect to simulate loading */
        .globe-skeleton::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 15%;
            width: 70%;
            height: 70%;
            border-radius: 50%;
            background: radial-gradient(
                circle at 35% 35%,
                rgba(80, 170, 255, 0.2) 0%,
                transparent 65%
            );
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.3;
                transform: scale(0.95);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.05);
            }
        }

        /* Hide skeleton when globe is loaded */
        .globe-skeleton.loaded {
            opacity: 0;
            pointer-events: none;
        }

        /* HUD overlay styling - match the fixed globe size and center it inside the component */
        .globe-hud {
            position: absolute;
            width: 250px;
            height: 250px;
            top: 48px;
            left: 50%;
            transform: translate(-50%, 0);
            z-index: 3;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hud-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .hud-line {
            stroke: rgba(102,179,255,0.85);
            stroke-width: 1;
            fill: none;
            filter: drop-shadow(0 0 6px rgba(102,179,255,0.25));
        }

        .hud-accent {
            stroke: #66b3ff;
            stroke-width: 1.5;
            fill: none;
        }

        .globe-label {
            font-family: 'Roboto Mono', monospace;
            font-size: 13px; /* slightly larger for better readability */
            fill: #ff4444;
            text-anchor: middle;
            pointer-events: none;
        }

          .profile-section {
                /* Make profile section flow around the floated location component */
                display: block;
                background: rgba(18, 24, 40, 0.7);
                /* subtler starting border and glow */
                border: 2px solid rgba(0,63,255,0.12);
                border-radius: 10px;
                padding: 16px;
                box-shadow: 0 0 10px rgba(0, 63, 255, 0.10);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                color: white;
                font-size: 18px;
                line-height: 1.55;
                overflow: visible; /* Allow content to overflow without cropping */
                /* Remove min-height so it grows with content */
                min-height: auto;
        }

        /* Make profile-section keyboard-focusable and brighten on hover/focus like navbar */
        .profile-section {
            transition: box-shadow 0.24s ease, background 0.24s ease, border-color 0.24s ease, transform 0.18s ease;
        }

        .profile-section:hover,
        .profile-section:focus-visible {
            box-shadow: 0 10px 40px rgba(0, 63, 255, 0.55), 0 0 28px rgba(102,179,255,0.12) inset;
            background: rgba(18, 24, 40, 0.85);
            border-color: rgba(34, 110, 255, 0.85);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            transform: translateY(-3px) scale(1.01);
        }

        .profile-section h2 {
            font-size: 24px;
            color: white;
            letter-spacing: 2px;
            margin-bottom: 15px;
            text-shadow: 0 0 5px var(--matrix-blue);
        }

        /* Add spacing between paragraphs in the Profile box so the three
           lines appear visually separated without altering markup */
        .profile-section p {
            margin-bottom: 12px;
        }

        /* Remove padding on both sides of the planet element on wider screens */
        @media (min-width: 901px) {
            .rectangular-component {
                width: 250px;
            }
        }

        /* Increase profile section text size on smaller screens */
        @media (max-width: 900px) {
            .profile-inner {
                display: block;
                position: relative;
            }

            .profile-inner::after {
                content: "";
                display: table;
                clear: both;
            }

            #globe-component {
                float: left;
                width: 240px;
                max-width: 45%;
                margin: 0 32px var(--component-gap) 0;
                min-height: 240px;
                align-items: flex-start;
                justify-content: flex-start;
            }
            
            .profile-content {
                display: block;
            }

            .profile-section h2 {
                font-size: 42px;
            }
            
            .profile-section p {
                font-size: 27px;
                line-height: 1.6;
            }
            
            .rectangular-component h2 {
                font-size: 28px;
            }

            .globe-root,
            .globe-skeleton,
            .globe-hud {
                top: 56px;
                left: 50%;
            }
        }

        /* Legend (key) for project categories shown in Projects section */
        .legend {
            display: flex;
            gap: 28px;
            align-items: flex-start;
            margin-bottom: 18px;
        }

        .legend .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(102,179,255,0.06);
            padding: 8px 10px;
            border-radius: 8px;
            font-size: 13px;
            color: #cfe9ff;
            /* prepare for hover/focus animations */
            transition: transform 200ms cubic-bezier(.2,.9,.2,1), box-shadow 200ms ease, background 200ms ease, border-color 200ms ease, filter 200ms ease;
            transform-origin: center;
            will-change: transform, box-shadow, filter;
        }

        .legend .swatch {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            flex: 0 0 14px;
            box-shadow: 0 0 6px rgba(0,0,0,0.25) inset;
        }

        /* category colors */
        .swatch.ux { background: linear-gradient(180deg,#6bd1ff,#2f9fff); }
        .swatch.research { background: linear-gradient(180deg,#ffd86b,#ffb84d); }
        .swatch.data { background: linear-gradient(180deg,#9dff9a,#39d47a); }
        .swatch.frontend { background: linear-gradient(180deg,#c08bff,#7a4cff); }
        .swatch.ai { background: linear-gradient(180deg,#ff6bdb,#ff2a9a); }

        /* Hover and focus for legend items (keyboard accessible) */
        .legend .legend-item:hover,
        .legend .legend-item:focus,
        .legend .legend-item:focus-within {
            transform: translateY(-4px) scale(1.04);
            box-shadow: 0 12px 30px rgba(0,77,205,0.25), 0 0 18px rgba(102,179,255,0.08) inset;
            background: rgba(255,255,255,0.02);
            border-color: rgba(102,179,255,0.22);
            z-index: 6;
        }

        .legend .legend-item:focus-visible {
            outline: 2px solid rgba(102,179,255,0.16);
            outline-offset: 4px;
        }

        /* Active/selected filter state */
        .legend .legend-item.active {
            background: rgba(102,179,255,0.12);
            border-color: rgba(102,179,255,0.45);
            box-shadow: 0 8px 24px rgba(0,100,255,0.35), 0 0 20px rgba(102,179,255,0.15) inset;
            transform: translateY(-2px) scale(1.02);
        }

        .legend .legend-item {
            cursor: pointer;
            user-select: none;
        }

        /* Reset button styling */
        .legend-reset {
            display: none;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, rgba(255,70,70,0.15), rgba(200,40,40,0.12));
            border: 1px solid rgba(255,80,80,0.25);
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 13px;
            color: #ffb3b3;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(.2,.9,.2,1);
            font-family: 'Roboto Mono', monospace;
            font-weight: 600;
            letter-spacing: 0.5px;
            user-select: none;
        }

        .legend-reset.visible {
            display: inline-flex;
            animation: slideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .legend-reset:hover,
        .legend-reset:focus {
            background: linear-gradient(135deg, rgba(255,70,70,0.25), rgba(200,40,40,0.18));
            border-color: rgba(255,100,100,0.5);
            box-shadow: 0 8px 20px rgba(255,70,70,0.25), 0 0 15px rgba(255,100,100,0.1) inset;
            transform: translateY(-2px) scale(1.03);
            color: #ffcccc;
        }

        .legend-reset:focus-visible {
            outline: 2px solid rgba(255,100,100,0.3);
            outline-offset: 3px;
        }

        .legend-reset:active {
            transform: translateY(0) scale(0.98);
        }

        .legend-reset .reset-icon {
            display: inline-block;
            font-size: 14px;
            transition: transform 0.3s ease;
        }

        .legend-reset:hover .reset-icon {
            transform: rotate(-180deg);
        }

        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateX(-20px) scale(0.8);
            }
            60% {
                transform: translateX(5px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        /* Make the small color swatches pop on hover/focus of their parent or themselves */
        .legend .legend-item:hover .swatch,
        .legend .legend-item:focus-within .swatch,
        .legend .swatch:focus,
        .legend .swatch:hover {
            filter: brightness(1.15) saturate(1.12);
            box-shadow: 0 6px 18px rgba(0,63,255,0.18);
            transform: translateY(-2px) scale(1.08);
        }

        .legend .swatch {
            transition: transform 180ms ease, filter 180ms ease, box-shadow 180ms ease;
            transform-origin: center;
            display: inline-block;
        }

        .projects-section h2 {
            font-size: 30px;
            letter-spacing: 3px;
            color: #bfe1ff;
            text-align: center;
            margin-bottom: 26px;
            text-shadow: 0 0 10px rgba(75,160,255,0.18);
            font-weight: 600;
        }

        /* spacing between sections */
        .projects-section {
            margin-top: var(--section-gap);
            padding: 28px 0;
        }

        /* Large neon framed panel wrapping the entire projects area */
        .projects-panel {
            position: relative;
            padding: 36px 28px; /* breathing room so neon border doesn't overlap content */
            /* center and use section gap for bottom spacing */
            margin: 24px auto calc(var(--section-gap) + 16px) auto;
            /* match the ID card width so these large sections align exactly */
            width: var(--card-base-width);
            max-width: 100%;
            box-sizing: border-box;
            border-radius: 12px;
            /* stronger, slightly darker base with subtle glass effect to increase contrast */
            background: linear-gradient(180deg, rgba(6,12,24,0.92), rgba(10,16,30,0.9));
            /* add subtle frosted glass overlay to lift content from the background */
            backdrop-filter: blur(6px) saturate(110%);
            -webkit-backdrop-filter: blur(6px) saturate(110%);
            /* stronger, deeper shadow to make the panel read as elevated */
            box-shadow: 0 18px 60px rgba(2,10,40,0.55), 0 6px 18px rgba(72,150,255,0.06) inset;
            border: 1px solid rgba(80,160,255,0.08);
        }

        /* outer neon outline */
        .projects-panel::before {
            /* decorative inner neon outline (kept visible now for stronger emphasis) */
            content: '';
            position: absolute;
            inset: 6px; /* draws the decoration inside the panel instead of outside */
            border-radius: 9px;
            border: 2px solid rgba(80,170,255,0.22);
            box-shadow: 0 0 18px rgba(80,170,255,0.12), 0 0 48px rgba(24,60,140,0.12) inset;
            pointer-events: none;
            z-index: 4;
            mix-blend-mode: screen;
        }

        /* decorative neon corner strokes: previously placed outside the panel
           (left/top -14px). Move them to sit visually flush with the panel edge
           by insetting 6px so they align with the neon inner outline (::before inset:6px). */
        .projects-panel::after {
            content: '';
            position: absolute;
            /* inset so the corner sits on the panel edge rather than outside */
            left: 6px;
            top: 6px;
            width: 22px;
            height: 22px;
            border-top: 3px solid rgba(80,170,255,0.95);
            border-left: 3px solid rgba(80,170,255,0.95);
            border-top-left-radius: 6px;
            background: transparent;
            box-shadow: none;
            pointer-events: none;
            z-index: 6;
        }

        /* corner element shared base */
        /* corners: place at the same inset as the inner neon outline (6px)
           so the decorative strokes align with the frame edge */
        .projects-panel .corner-bright {
            position: absolute;
            width: 22px;
            height: 22px;
            background: transparent;
            pointer-events: none;
            z-index: 999; /* keep above content but below any focus outlines */
        }

        /* top-left (we already have a ::after but keep parity) */
        .projects-panel .corner--tl {
            left: 6px;
            top: 6px;
            border-top: 3px solid rgba(80,170,255,0.95);
            border-left: 3px solid rgba(80,170,255,0.95);
            border-top-left-radius: 6px;
        }

        /* top-right */
        .projects-panel .corner--tr {
            right: 6px;
            top: 6px;
            border-top: 3px solid rgba(80,170,255,0.95);
            border-right: 3px solid rgba(80,170,255,0.95);
            border-top-right-radius: 6px;
        }

        /* bottom-left */
        .projects-panel .corner--bl {
            left: 6px;
            bottom: 6px;
            border-bottom: 3px solid rgba(80,170,255,0.95);
            border-left: 3px solid rgba(80,170,255,0.95);
            border-bottom-left-radius: 6px;
        }

        /* bottom-right */
        .projects-panel .corner--br {
            right: 6px;
            bottom: 6px;
            border-bottom: 3px solid rgba(80,170,255,0.95);
            border-right: 3px solid rgba(80,170,255,0.95);
            border-bottom-right-radius: 6px;
        }

        /* Ensure no background image/color or shadow remains from elsewhere */
        .projects-panel .corner-bright,
        .projects-panel::after,
        .projects-panel::before {
            background-image: none !important;
            background-color: transparent !important;
        }

        /* Apply the same corner decorations to contact-panel */
        .contact-panel::before {
            content: '';
            position: absolute;
            inset: 6px; /* draws the decoration inside the panel consistent with projects */
            border-radius: 9px;
            border: 2px solid rgba(80,170,255,0.22);
            box-shadow: 0 0 18px rgba(80,170,255,0.12), 0 0 48px rgba(24,60,140,0.12) inset;
            pointer-events: none;
            z-index: 4;
            mix-blend-mode: screen;
        }

        .contact-panel::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 6px;
            width: 22px;
            height: 22px;
            border-top: 3px solid rgba(80,170,255,0.95);
            border-left: 3px solid rgba(80,170,255,0.95);
            border-top-left-radius: 6px;
            background: transparent;
            box-shadow: none;
            pointer-events: none;
            z-index: 6;
        }

        .contact-panel .corner-bright {
            position: absolute;
            width: 22px;
            height: 22px;
            background: transparent;
            pointer-events: none;
            z-index: 999;
        }

        .contact-panel .corner--tl { left: 6px; top: 6px; border-top: 3px solid rgba(80,170,255,0.95); border-left: 3px solid rgba(80,170,255,0.95); border-top-left-radius: 6px; }
        .contact-panel .corner--tr { right: 6px; top: 6px; border-top: 3px solid rgba(80,170,255,0.95); border-right: 3px solid rgba(80,170,255,0.95); border-top-right-radius: 6px; }
        .contact-panel .corner--bl { left: 6px; bottom: 6px; border-bottom: 3px solid rgba(80,170,255,0.95); border-left: 3px solid rgba(80,170,255,0.95); border-bottom-left-radius: 6px; }
        .contact-panel .corner--br { right: 6px; bottom: 6px; border-bottom: 3px solid rgba(80,170,255,0.95); border-right: 3px solid rgba(80,170,255,0.95); border-bottom-right-radius: 6px; }

        /* ensure the heading sits nicely inside the framed card */
        .projects-panel h2 { margin-top: 6px; }

        .projects-grid {
            display: grid;
            /* inner content width: panel width minus horizontal padding (28px*2 = 56px). */
            width: var(--card-base-width);
            max-width: 100%;
            margin: 0 auto;
            /* keep 3 columns on wide screens but become responsive on smaller widths */
            grid-template-columns: repeat(3, 1fr);
            gap: 28px;
            align-items: stretch; /* ensure grid items stretch to fill row height */
        }

        /* Switch to 2 columns when screen width is less than 1300px */
        @media (max-width: 1299px) {
            .projects-grid {
                grid-template-columns: repeat(2, 1fr);
                width: 100%;
                max-width: 100%;
            }
        }

        /* Switch to 1 column when screen width is less than 900px */
        @media (max-width: 900px) {
            .projects-grid {
                grid-template-columns: 1fr;
                width: 100%;
                max-width: 100%;
            }
            
            /* Maintain aspect ratio for project images on smaller screens */
            .project-image,
            .project-card .project-card-inner .project-image {
                height: auto !important;
                aspect-ratio: 16 / 9;
                min-height: unset !important;
                max-height: unset !important;
            }
            
            .project-image img {
                height: 100%;
                width: 100%;
                object-fit: cover;
            }
            
            /* Make Projects section title bigger on smaller screens */
            .projects-section h2 {
                font-size: 42px;
            }
            
            /* Make legend text and icons bigger on smaller screens */
            .legend .legend-item {
                font-size: 24px;
                gap: 12px;
            }
            
            .legend .swatch {
                width: 28px;
                height: 28px;
                flex: 0 0 28px;
            }
            
            .legend-reset {
                font-size: 24px;
            }
            
            .legend-reset .reset-icon {
                font-size: 24px;
            }

        }

        /* Blue neon boxed project card to match the attached aesthetic */
        .project-card {
            background: linear-gradient(180deg, rgba(6,16,30,0.88), rgba(4,10,20,0.75));
            border-radius: 10px;
            padding: 26px; /* increased padding to feel more spacious */
            position: relative;
            overflow: visible;
            box-shadow: 0 12px 40px rgba(10,40,90,0.32), inset 0 1px 0 rgba(255,255,255,0.02);
            transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, border-color 200ms ease;
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-height: 300px; /* ensure larger visual weight */
            /* Make each grid item fill the available grid cell height so all cards match */
            height: 100%;
        }

        /* outer neon border using pseudo-element so it sits outside the inner panel like your screenshot */
        .project-card::before {
            /* Keep the decorative outline interior so it doesn't widen the card */
            content: '';
            position: absolute;
            inset: 6px; /* smaller inset inside the card */
            border-radius: 8px;
            border: 2px solid rgba(92,160,255,0.14);
            box-shadow: 0 0 0 1px rgba(12,30,60,0.5), 0 0 18px rgba(50,140,255,0.06);
            pointer-events: none;
        }

        /* inner thin neon frame removed to keep a single visible border */

        .project-card:hover,
        .project-card:focus-within,
        .project-card:focus {
            transform: translateY(-6px);
            z-index: 8;
            box-shadow: 0 30px 70px rgba(20,80,200,0.35), 0 0 60px rgba(70,160,255,0.12);
        }

        .project-card:focus-visible {
            outline: 2px solid rgba(102,179,255,0.18);
            outline-offset: 4px;
        }

        /* Highlighted state for matching projects */
        .project-card.highlighted {
            background: linear-gradient(180deg, rgba(0,63,255,0.15), rgba(0,40,100,0.12));
            border: 2px solid rgba(102,179,255,0.35);
            box-shadow: 0 0 40px rgba(0,163,255,0.4), 0 0 80px rgba(102,179,255,0.15), inset 0 0 30px rgba(0,163,255,0.08);
            transform: translateY(-4px);
        }

        .project-card.highlighted::before {
            border-color: rgba(102,179,255,0.45);
            box-shadow: 0 0 0 1px rgba(102,179,255,0.3), 0 0 30px rgba(102,179,255,0.25);
        }

        .project-card.highlighted:hover {
            box-shadow: 0 0 50px rgba(0,163,255,0.5), 0 0 100px rgba(102,179,255,0.2), inset 0 0 40px rgba(0,163,255,0.12);
        }

        /* Dim non-matching projects when filters are active */
        .project-card.dimmed {
            opacity: 0.4;
            filter: grayscale(0.3);
            transform: scale(0.97);
        }

        .project-card.dimmed:hover {
            opacity: 0.6;
            transform: scale(0.98) translateY(-2px);
        }

        /* Multi-match badge to show how many filters a project matches */
        .match-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: linear-gradient(135deg, rgba(0,255,157,0.95), rgba(0,200,120,0.9));
            color: #001a0f;
            font-size: 13px;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,255,157,0.4), 0 0 20px rgba(0,255,157,0.2);
            z-index: 10;
            letter-spacing: 0.5px;
            display: none;
            animation: badgePop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .project-card.highlighted .match-badge {
            display: block;
        }

        @keyframes badgePop {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 0;
            }
            60% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .project-card-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        /* project-image becomes a dark panel with subtle inner glow */
        .project-image {
            position: relative;
            width: 100%;
            height: 240px; /* taller hero image for each project */
            border-radius: 8px;
            background: linear-gradient(180deg, rgba(8,18,36,0.6), rgba(4,8,16,0.6));
            border: 1px solid rgba(60,120,220,0.08);
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 10px 26px rgba(20,60,120,0.08);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .project-card .project-card-inner .project-image {
            width: 100%;
            height: 220px; /* unify inner image height so all cards share the same visual block */
            background-color: #0a1220;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(0, 163, 255, 0.15);
            box-shadow: 0 0 12px rgba(0, 163, 255, 0.1) inset;
            display: block;
            flex: 0 0 auto;
        }

        .project-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .project-details {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* push title and description apart for consistent spacing */
            gap: 6px;
            padding-top: 6px;
        }

        .project-details h3 {
            font-size: 22px;
            margin: 0;
            color: #bfe6ff;
            letter-spacing: 1px;
            font-weight: 600;
            text-shadow: 0 0 8px rgba(80,160,255,0.08);
        }

        .project-details p {
            font-size: 15px;
            margin: 0;
            color: rgba(190,210,230,0.82);
            opacity: 0.95;
        }

        @media (max-width: 900px) {
            .project-details h3 {
                font-size: calc(1.75 * 22px);
            }

            .project-details p {
                font-size: calc(1.75 * 15px);
            }
        }

        /* --- Category Indicator Dots --- */
        .project-card-inner {
            position: relative;
        }

        .project-categories {
            position: absolute;
            bottom: 12px;
            right: 12px;
            display: flex;
            gap: 6px;
            z-index: 2;
        }

        /* Lower position for aspect-ratio projects (Gaming and Cafe) */
        a[href="gaming.html"] .project-categories,
        a[href="Cafe.html"] .project-categories {
            bottom: -5px;
        }

        .category-dot {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .category-dot.ux { background: linear-gradient(180deg,#6bd1ff,#2f9fff); }
        .category-dot.research { background: linear-gradient(180deg,#ffd86b,#ffb84d); }
        .category-dot.data { background: linear-gradient(180deg,#9dff9a,#39d47a); }
        .category-dot.frontend { background: linear-gradient(180deg,#c08bff,#7a4cff); }
        .category-dot.ai { background: linear-gradient(180deg,#ff6bdb,#ff2a9a); }

        /* --- Skills Accordion Styling --- */
        .skills-list {
            display: flex;
            flex-direction: column;
            gap: 28px;
            width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
        }

        .skill-item {
            background: linear-gradient(180deg, rgba(6,12,24,0.7), rgba(4,8,16,0.6));
            border: 1px solid rgba(80,170,255,0.06);
            padding: 10px 12px;
            border-radius: 8px;
            box-shadow: 0 8px 28px rgba(2,10,40,0.45);
            overflow: hidden;
        }

        .skill-toggle {
            width: 100%;
            text-align: left;
            background: transparent;
            color: #bfe1ff;
            font-family: 'Roboto Mono', monospace;
            font-size: 16px;
            letter-spacing: 1px;
            border: none;
            padding: 8px 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 28px;
            justify-content: space-between;
        }

        .skill-toggle:focus {
            outline: 2px solid rgba(102,179,255,0.18);
            outline-offset: 4px;
        }

        .skill-toggle::before {
            content: '';
        }

        .skill-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 320ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease;
            opacity: 0;
            padding-top: 0;
            color: rgba(190,210,230,0.9);
            font-size: 24px;
            line-height: 1.55;
        }

        .skill-item.open .skill-panel {
            opacity: 1;
            padding-top: 10px;
        }

        /* Individual skill chip styling */
        .skill-panel .skill-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 6px 0;
        }

        .skill-chip {
            display: inline-block;
            padding: 10px 16px;
            background: linear-gradient(135deg, rgba(0,63,255,0.08), rgba(0,20,60,0.12));
            border: 1px solid rgba(0,163,255,0.22);
            border-radius: 8px;
            color: #d4ebff;
            font-size: 15px;
            font-weight: 400;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(0,63,255,0.06), inset 0 1px 0 rgba(255,255,255,0.03);
            transition: all 0.2s cubic-bezier(0.2, 0.9, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .skill-chip::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102,179,255,0.15), transparent);
            transition: left 0.5s ease;
        }

        .skill-chip:hover {
            transform: translateY(-2px) scale(1.03);
            border-color: rgba(102,179,255,0.5);
            box-shadow: 0 8px 20px rgba(0,100,255,0.25), inset 0 0 12px rgba(102,179,255,0.08);
            background: linear-gradient(135deg, rgba(0,63,255,0.14), rgba(0,40,100,0.18));
            color: #ffffff;
        }

        .skill-chip:hover::before {
            left: 100%;
        }

        /* Add a small caret indicator on the right using pseudo-element */
        .skill-toggle .caret {
            color: rgba(150,200,255,0.95);
            transform-origin: center;
            transition: transform 240ms ease;
        }

        .skill-item.open .skill-toggle .caret {
            transform: rotate(180deg);
        }

        /* --- Responsive text sizing for skills section on smaller screens --- */
        @media (max-width: 900px) {
                    .skill-toggle {
                        font-size: calc(2 * 16px);
                        padding: 12px 9px;
                    }
                    .skill-panel {
                        font-size: calc(2 * 24px);
                    }
            .skill-chip {
                        font-size: calc(2 * 15px);
                padding: 15px 24px;
            }
            .skill-panel .skill-chips {
                padding: 9px 0;
            }
        }

        /* --- Contact Panel Styling --- */
        .contact-panel {
            position: relative;
            margin: 24px auto calc(var(--section-gap) + 20px) auto;
            padding: 42px 38px;
            width: var(--card-base-width);
            max-width: 100%;
            box-sizing: border-box;
            border-radius: 14px;
            background: linear-gradient(135deg, rgba(5,12,24,0.94), rgba(8,18,36,0.9));
            border: 1px solid rgba(80,160,255,0.12);
            box-shadow: 0 24px 80px rgba(2,10,40,0.55), 0 0 48px rgba(58,160,255,0.16) inset;
            display: grid;
            /* Title row + content row: title spans both columns, then two columns underneath */
            grid-template-columns: minmax(0, 30%) minmax(0, 70%);
            grid-template-rows: auto 1fr;
            gap: 40px;
            align-items: stretch;
            isolation: isolate;
        }

        .contact-left {
            display: flex;
            flex-direction: column;
            gap: 26px;
            background: linear-gradient(180deg, rgba(12,26,48,0.74), rgba(6,14,28,0.74));
            border: 1px solid rgba(80,170,255,0.16);
            border-radius: 10px;
            padding: 26px 28px 24px 28px;
            box-shadow: inset 0 14px 32px rgba(8,24,44,0.45);
            font-family: 'Roboto Mono', monospace;
            color: rgba(190,215,255,0.82);
            align-self: stretch;
            font-size: 0.95rem;
            line-height: 1.55;
            /* allow left column to be wider on large screens */
            flex: 0 1 320px;
            max-width: 360px;
            min-width: 240px;
            /* Fix Chrome overflow issue */
            min-width: 0;
            overflow: hidden;
        }

        .contact-block h3 {
            margin: 0 0 12px;
            font-size: 0.92rem;
            letter-spacing: 2.6px;
            color: var(--matrix-blue);
            text-transform: uppercase;
        }

        /* Contact section title sits in normal flow above the columns */
        #contact-title {
            flex: 0 0 100%;
            width: 100%;
            position: static;
            transform: none;
            margin: 0 0 32px 0;
            text-align: center;
            font-size: 1.6rem;
            letter-spacing: 1px;
            color: #dff4ff;
            text-shadow: 0 0 12px rgba(0,63,255,0.45);
            pointer-events: none; /* decorative only */
        }

        /* Allow the next flex items to wrap onto a new row after the title */
        .contact-panel {
            flex-wrap: wrap;
        }

        .contact-left,
        .contact-form {
            padding-top: 0;
        }

        /* Make the left contact info column the same taller height as the form */
        .contact-left {
            /* Ensure the contact info panel grows to match the form height */
            min-height: 360px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        @media (max-width: 980px) {
            #contact-title {
                margin-bottom: 16px;
                pointer-events: auto;
            }
        }

        .contact-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 32px;
        }

        .contact-item {
            display: flex;
            flex-direction: column;
            gap: 14px;
            padding: 8px 0;
        }

        .contact-label {
            color: rgba(130,200,255,0.78);
            font-size: 0.9rem;
            letter-spacing: 1.8px;
            text-transform: uppercase;
        }

        /* Contact values should keep natural capitalization (no forced uppercase)
           and use tighter letter-spacing for readability */
        .contact-value {
            color: #7ef2a6;
            font-size: 1.05rem;
            letter-spacing: 0.4px;
            text-transform: none;
            line-height: 1.6;
            text-wrap: balance;
            /* Fix Chrome overflow - force text to wrap */
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            max-width: 100%;
        }

        .contact-value a {
            color: inherit;
            text-decoration: none;
            transition: color 0.18s ease, text-shadow 0.18s ease;
            /* Ensure links also wrap properly in Chrome */
            word-wrap: break-word;
            overflow-wrap: break-word;
            display: inline-block;
            max-width: 100%;
        }

        .contact-value a:hover,
        .contact-value a:focus {
            color: #94ffbf;
            text-shadow: 0 0 6px rgba(148,255,191,0.45);
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 22px;
            background: linear-gradient(180deg, rgba(4,10,22,0.85), rgba(8,16,30,0.82));
            border: 1px solid rgba(80,160,255,0.16);
            border-radius: 10px;
            padding: 28px 32px;
            box-shadow: inset 0 12px 40px rgba(10,20,42,0.42);
            align-self: stretch;
            font-size: 0.98rem;
            line-height: 1.65;
        }

        .field-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .contact-form label {
            color: rgba(150,210,255,0.84);
            font-size: 0.92rem;
            letter-spacing: 1.9px;
        }

        /* small red/green asterisk for required fields inside the contact form */
        .contact-form label .required-asterisk {
            color: #ff6b6b; /* subtle red for required marker */
            margin-left: 6px;
            font-weight: 700;
            display: inline-block;
            transform: translateY(-1px);
            text-shadow: 0 0 8px rgba(255,107,107,0.18);
        }

        .contact-form select,
        .contact-form textarea,
        .contact-form input[type="text"],
        .contact-form input[type="email"] {
            background: rgba(4,12,24,0.65);
            border: 1px solid rgba(80,170,255,0.18);
            color: rgba(205,225,255,0.9);
            padding: 15px 18px;
            border-radius: 6px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.98rem;
            letter-spacing: 0.5px;
            min-height: 52px;
            transition: border-color 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
        }

        .contact-form textarea {
            /* Increased height for message area to make the form taller */
            min-height: 320px;
            resize: vertical;
        }

        .contact-form select:focus,
        .contact-form textarea:focus,
        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus {
            outline: none;
            border-color: rgba(126,242,166,0.8);
            box-shadow: 0 0 0 2px rgba(126,242,166,0.18);
            background: rgba(6,16,30,0.9);
        }

        .contact-form ::placeholder {
            color: rgba(160,185,210,0.5);
        }

        .contact-meta {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 16px;
        }

        .contact-actions {
            display: flex;
            justify-content: flex-end;
        }

        .contact-send {
            width: 100%;
            background: linear-gradient(135deg, #0f8f3a, #19ba52);
            border: 1px solid rgba(126,242,166,0.62);
            color: rgba(4,12,12,0.95);
            font-weight: 800;
            padding: 14px 18px;
            border-radius: 6px;
            cursor: pointer;
            letter-spacing: 2px;
            text-transform: uppercase;
            box-shadow: 0 14px 32px rgba(20,120,60,0.28);
            font-family: 'Roboto Mono', monospace;
            transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
            font-size: 1.02rem;
        }

        /* Dimmed/disabled appearance for send button until form valid */
        .contact-send[disabled] {
            opacity: 0.45;
            filter: grayscale(0.2) brightness(0.85) contrast(0.9);
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .contact-send:hover,
        .contact-send:focus {
            transform: translateY(-1px);
            filter: brightness(1.05);
            box-shadow: 0 18px 36px rgba(20,140,70,0.36);
            outline: none;
        }

        .contact-send:focus-visible {
            outline: 2px solid rgba(126,242,166,0.45);
            outline-offset: 4px;
        }

        @media (max-width: 980px) {
            .contact-panel {
                grid-template-columns: 1fr;
                padding: 32px 26px;
            }

            .contact-form {
                padding: 24px 20px;
            }
        }

        @media (max-width: 640px) {
            .contact-meta {
                grid-template-columns: 1fr;
            }
        }

    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="#" class="nav-brand">
            <!-- Futuristic LT Monogram Logo -->
            <svg class="lt-logo" viewBox="0 0 64 64" aria-hidden="true" role="img">
                <title>LT Monogram</title>
                <!-- Single-color circle and letters (no glow) -->
                <circle cx="32" cy="32" r="29" stroke="var(--matrix-blue)" stroke-width="2.4" fill="none" />
                <g transform="translate(-5,0)" stroke="var(--matrix-blue)" stroke-width="4" fill="none" class="logo-stroke" stroke-linecap="round" stroke-linejoin="round">
                    <!-- visually nudged left -5px for optical centering -->
                    <path d="M22 22 V42 H36" />
                    <path d="M42 22 H56 M49 22 V42" />
                </g>
            </svg>
            <span style="letter-spacing:1px;">Logan Tuttle.org</span>
        </a>
        <ul class="nav-links">
            <li><a href="#profile">Profile</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#skills">Skills</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="/resume">Resume</a></li>
            <li><a class="external" href="https://www.linkedin.com/in/uw-logan-tuttle/" target="_blank" rel="noopener noreferrer">
                LinkedIn
                <svg class="external-link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="7" y1="17" x2="17" y2="7"></line>
                    <polyline points="7 7 17 7 17 17"></polyline>
                </svg>
            </a></li>
        </ul>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Mobile menu toggle functionality
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (mobileToggle && navLinks) {
                mobileToggle.addEventListener('click', () => {
                    navLinks.classList.toggle('mobile-open');
                    mobileToggle.innerHTML = navLinks.classList.contains('mobile-open') ? '✕' : '☰';
                });
                
                // Close menu when clicking a link
                navLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        navLinks.classList.remove('mobile-open');
                        mobileToggle.innerHTML = '☰';
                    });
                });
            }
            
            // Re-check on resize
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768 && navLinks) {
                    navLinks.classList.remove('mobile-open');
                    if (mobileToggle) mobileToggle.innerHTML = '☰';
                }
            });

            // Scrollspy for nav links
            const sections = document.querySelectorAll('section[id], div[id="profile"]');
            const navLinksAll = document.querySelectorAll('.nav-links a[href^="#"]');
            
            function updateActiveLink() {
                let current = '';
                const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
                const navHeight = document.querySelector('.navbar')?.offsetHeight || 80;
                
                // Check each section to find which one is currently in view
                sections.forEach(section => {
                    // Use getBoundingClientRect for accurate positioning that accounts for transforms
                    const rect = section.getBoundingClientRect();
                    const sectionTop = rect.top + scrollPosition;
                    const sectionHeight = rect.height;
                    
                    // Trigger when section top is within viewport (accounting for nav bar + offset)
                    if (scrollPosition >= sectionTop - navHeight - 150) {
                        current = section.getAttribute('id');
                    }
                });
                
                // If we're near the top of the page and no section is detected, default to profile
                if (scrollPosition < 300 && !current) {
                    current = 'profile';
                }
                
                // Update active class on nav links
                navLinksAll.forEach(link => {
                    link.classList.remove('active');
                    const href = link.getAttribute('href');
                    if (href === `#${current}`) {
                        link.classList.add('active');
                    }
                });
            }
            
            // Run on scroll
            window.addEventListener('scroll', updateActiveLink);
            
            // Run on page load
            updateActiveLink();
            
            // Run when clicking nav links (with a small delay to let scroll happen)
            navLinksAll.forEach(link => {
                link.addEventListener('click', () => {
                    setTimeout(updateActiveLink, 100);
                });
            });
        });
    </script>
    <!-- The canvas element is where the Matrix rain animation will be drawn -->
    <canvas id="matrix-canvas"></canvas>

    <div class="layout-wrapper">
        <div id="layout-root" data-design-width="1450">

    <!-- The Futuristic ID Card -->
    <div class="site-width">
        <div class="id-card-container">
            <div class="id-card">
            <svg class="id-card-border" viewBox="0 0 800 450" preserveAspectRatio="none" aria-hidden="true">
                <!-- Rounded rectangle path: smaller radius (10) and slightly tighter inset so animated stroke aligns with .id-card border -->
                <path d="M11 1 H789 A10 10 0 0 1 799 11 V439 A10 10 0 0 1 789 449 H11 A10 10 0 0 1 1 439 V11 A10 10 0 0 1 11 1 Z"></path>
            </svg>
            <div class="card-content">
                <div class="left-panel">
                    <div class="photo-area">
                        <!-- profile photo inserted beneath the scanning overlay -->
                        <img src="prof_pic.webp" alt="profile" class="profile-photo" />
                        <!-- Scanning line SVG for effect -->
                        <svg>
                            <line x1="0" y1="0" x2="100%" y2="0" stroke="var(--matrix-blue)" stroke-width="2">
                                <animate attributeName="y1" from="-5" to="105%" dur="3s" repeatCount="indefinite" />
                                <animate attributeName="y2" from="-5" to="105%" dur="3s" repeatCount="indefinite" />
                            </line>
                        </svg>
                    </div>
                    <div class="details">
                        <div class="detail-item">
                            <label>// Agent ID</label>
                            <span>Logan Tuttle</span>
                        </div>
                    </div>
                </div>
                <div class="right-panel">
                    <div class="card-header">
                        <h1>ID_CARD</h1>
                        <div class="status-wrapper">
                            <span class="status-label">Status:</span>
                            <div class="status">Seeking Opportunities</div>
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="detail-item">
                            <label>// DESIGNATION</label>
                            <span>User Experience</span>
                        </div>
                        <div class="detail-item">
                            <label>// Seeking</label>
                            <span>UX Product, Research & Design Roles</span>
                        </div>
                         <div class="detail-item">
                            <label>// University</label>
                            <span>University of Washington</span>
                        </div>
                        <div class="detail-item">
                            <label>// Program</label>
                            <span>Human-Centered Design & Engineering</span>
                        </div>
                    </div>
                     <div class="card-footer">
                        <div class="corp-logo">Logan Tuttle.org</div>
                    </div>
                    <!-- View Projects Button -->
                    <button class="view-projects-btn" id="view-projects-btn" aria-label="View projects">
                        View projects <span class="arrow">↓</span>
                    </button>
                </div>
            </div>
            </div>
        </div>
    </div>


    <!-- Profile Section -->
    <div class="site-width">
        <div class="profile-container">
            <div id="profile" class="profile-section" tabindex="0">
                <div class="profile-inner">
                    <div class="rectangular-component" id="globe-component" tabindex="0">
                        <h2>// Location</h2>
                        <!-- Skeleton loader shown while globe loads -->
                        <div class="globe-skeleton" id="globe-skeleton"></div>
                        <!-- Three.js will render into this canvas root -->
                        <div class="globe-root" id="globe-root"></div>
                        <!-- HUD overlays (SVG) -->
                        <div class="globe-hud" aria-hidden="true">
                            <svg class="hud-svg" viewBox="0 0 250 250" preserveAspectRatio="xMidYMid meet" id="hud-svg-root">
                                <!-- Geometric framing -->
                                <rect x="6" y="6" width="238" height="238" rx="8" ry="8" class="hud-line"/>
                                <!-- HUD decorative rings removed to keep globe clean -->
                                <!-- Connector line from marker to label (updated by JS) -->
                                <line id="seattle-connector" x1="125" y1="120" x2="145" y2="160" stroke="#ff6666" stroke-width="1.2" stroke-linecap="round" opacity="0.95" />
                                <!-- Seattle label placeholder (position will be updated by JS) -->
                                <text id="seattle-label" x="145" y="160" class="globe-label">Seattle, WA</text>
                            </svg>
                        </div>
                    </div>
                    <div class="profile-content">
                        <h2>// Profile</h2>
                        <p>Hi, I am Logan. A student at the University of Washington majoring in Human-Centered Design & Engineering (HCDE) with a minor in Data Science.</p>
                        <p>I use my technical knowledge of data science, programming, academic research and AI to create high quality user experiences.</p>
                        <p>I have worked on many projects including ai discord bots, Open source Data creation interfaces, published HCI research and more.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Projects Section -->
    <div class="site-width">
        <section id="projects" class="projects-section projects-panel">
            <h2>// Projects</h2>

    <div class="corner-bright corner--tl" aria-hidden="true"></div>
    <div class="corner-bright corner--tr" aria-hidden="true"></div>
    <div class="corner-bright corner--bl" aria-hidden="true"></div>
    <div class="corner-bright corner--br" aria-hidden="true"></div>

        <!-- Legend / Key for project categories -->
        <div class="legend" aria-hidden="false" role="list">
            <div class="legend-item" data-filter="ux" role="button" tabindex="0" aria-pressed="false">
                <span class="swatch ux" aria-hidden="true"></span><span>UX Design</span>
            </div>
            <div class="legend-item" data-filter="research" role="button" tabindex="0" aria-pressed="false">
                <span class="swatch research" aria-hidden="true"></span><span>UX Research</span>
            </div>
            <div class="legend-item" data-filter="data" role="button" tabindex="0" aria-pressed="false">
                <span class="swatch data" aria-hidden="true"></span><span>Data Science</span>
            </div>
            <div class="legend-item" data-filter="frontend" role="button" tabindex="0" aria-pressed="false">
                <span class="swatch frontend" aria-hidden="true"></span><span>Front-end</span>
            </div>
            <div class="legend-item" data-filter="ai" role="button" tabindex="0" aria-pressed="false">
                <span class="swatch ai" aria-hidden="true"></span><span>AI</span>
            </div>
            <button class="legend-reset" id="legend-reset" aria-label="Clear all filters">
                <span class="reset-icon">↻</span>
                <span>Reset</span>
            </button>
        </div>

    <div class="projects-grid">
            <a href="vega.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <div class="project-image" style="height:240px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));padding:18px;">
                        <img src="vega.webp" alt="Vega Chart project screenshot" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">Vega Chart</h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Design, Data Science, Front-end, AI">
                        <span class="category-dot ux" title="UX Design"></span>
                        <span class="category-dot data" title="Data Science"></span>
                        <span class="category-dot frontend" title="Front-end"></span>
                        <span class="category-dot ai" title="AI"></span>
                    </div>
                </div>
            </div>
            </a>
            <a href="Tavlo.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <div class="project-image" style="height:240px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));padding:18px;">
                        <img src="Tavlo.png" alt="Tavlo Bot project screenshot" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">Tavlo Bot</h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Design, Front-end, AI">
                        <span class="category-dot ux" title="UX Design"></span>
                        <span class="category-dot frontend" title="Front-end"></span>
                        <span class="category-dot ai" title="AI"></span>
                    </div>
                </div>
            </div>
            </a>
            <a href="HCI.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <div class="project-image" style="height:240px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));padding:18px;">
                        <img src="cip.png" alt="HCI Research project screenshot" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">HCI Research</h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Research, Data Science">
                        <span class="category-dot research" title="UX Research"></span>
                        <span class="category-dot data" title="Data Science"></span>
                    </div>
                </div>
            </div>
            </a>
            <a href="MTG.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <div class="project-image" style="height:240px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));padding:18px;">
                        <img src="mtgdata.webp" alt="Mtg Data project screenshot" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">Mtg Data.com</h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Design, Data Science, Front-end">
                        <span class="category-dot ux" title="UX Design"></span>
                        <span class="category-dot data" title="Data Science"></span>
                        <span class="category-dot frontend" title="Front-end"></span>
                    </div>
                </div>
            </div>
            </a>
            <a href="gaming.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <!-- Enforce 5:3 aspect ratio (width:height) for the Gaming UX image and avoid cropping -->
                    <div class="project-image" style="width:100%;aspect-ratio:5/3;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));">
                        <img src="gaming.jpg" alt="Gaming UX project screenshot" loading="lazy" style="width:100%;height:100%;object-fit:contain;object-position:center;border-radius:0;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">Gaming UX </h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Design, UX Research, Data Science">
                        <span class="category-dot ux" title="UX Design"></span>
                        <span class="category-dot research" title="UX Research"></span>
                        <span class="category-dot data" title="Data Science"></span>
                    </div>
                </div>
            </div>
            </a>
            <a href="Cafe.html" class="project-card-link">
            <div class="project-card">
                <div class="project-card-inner" style="display:flex;flex-direction:column;width:100%;gap:12px;">
                    <!-- Enforce 5:3 aspect ratio (width:height) for the Cafe Website Design image and avoid cropping -->
                    <div class="project-image" style="width:100%;aspect-ratio:5/3;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.15));">
                        <img src="cafe.webp" alt="Cafe Website Design screenshot" loading="lazy" style="width:100%;height:100%;object-fit:contain;object-position:center;border-radius:0;display:block;" />
                    </div>
                    <div class="project-details" style="padding:6px 4px 0 4px;">
                        <h3 style="margin:0;font-size:30px;line-height:1;color:white;font-weight:400;">Cafe Website Design</h3>
                    </div>
                    <div class="project-categories" aria-label="Project categories: UX Design">
                        <span class="category-dot ux" title="UX Design"></span>
                    </div>
                </div>
            </div>
            </a>
        </div>
        </section>
    </div>

    <!-- Skills Section -->
    <div class="site-width">
        <section id="skills" class="projects-section projects-panel" aria-labelledby="skills-title">
            <h2 id="skills-title">// Skills</h2>

            <div class="corner-bright corner--tl" aria-hidden="true"></div>
            <div class="corner-bright corner--tr" aria-hidden="true"></div>
            <div class="corner-bright corner--bl" aria-hidden="true"></div>
            <div class="corner-bright corner--br" aria-hidden="true"></div>

            <div class="skills-list" role="list">
                <!-- Accordion item template -->
                <div class="skill-item" role="listitem">
                    <button class="skill-toggle" aria-expanded="false" aria-controls="skill-uxdesign" id="skill-uxdesign-btn"><span>UX Design</span><span class="caret">▼</span></button>
                    <div id="skill-uxdesign" class="skill-panel" role="region" aria-labelledby="skill-uxdesign-btn">
                        <div class="skill-chips">
                            <span class="skill-chip">Wireframing &amp; Prototyping (Figma)</span>
                            <span class="skill-chip">Design Systems &amp; Component Libraries</span>
                            <span class="skill-chip">Accessible &amp; Inclusive Design (WCAG 2.1)</span>
                            <span class="skill-chip">User Flows</span>
                            <span class="skill-chip">High-Fidelity Mockups &amp; Interaction Design</span>
                        </div>
                    </div>
                </div>

                <div class="skill-item" role="listitem">
                    <button class="skill-toggle" aria-expanded="false" aria-controls="skill-uxresearch" id="skill-uxresearch-btn"><span>UX Research</span><span class="caret">▼</span></button>
                    <div id="skill-uxresearch" class="skill-panel" role="region" aria-labelledby="skill-uxresearch-btn">
                        <div class="skill-chips">
                            <span class="skill-chip">User Interviews</span>
                            <span class="skill-chip">Field Research</span>
                            <span class="skill-chip">Usability Testing</span>
                            <span class="skill-chip">Card Sorting</span>
                            <span class="skill-chip">Tree Testing</span>
                            <span class="skill-chip">Affinity Diagramming</span>
                            <span class="skill-chip">Content/Thematic Analysis</span>
                            <span class="skill-chip">Journey Mapping &amp; Persona Development</span>
                        </div>
                    </div>
                </div>

                <div class="skill-item" role="listitem">
                    <button class="skill-toggle" aria-expanded="false" aria-controls="skill-datasci" id="skill-datasci-btn"><span>Data Science</span><span class="caret">▼</span></button>
                    <div id="skill-datasci" class="skill-panel" role="region" aria-labelledby="skill-datasci-btn">
                        <div class="skill-chips">
                            <span class="skill-chip">Python</span>
                            <span class="skill-chip">R</span>
                            <span class="skill-chip">SQL</span>
                            <span class="skill-chip">Excel</span>
                            <span class="skill-chip">Google Analytics</span>
                            <span class="skill-chip">Data Visualization</span>
                            <span class="skill-chip">A/B Testing</span>
                            <span class="skill-chip">Survey Design</span>
                        </div>
                    </div>
                </div>

                <div class="skill-item" role="listitem">
                    <button class="skill-toggle" aria-expanded="false" aria-controls="skill-frontend" id="skill-frontend-btn"><span>Front-end Development</span><span class="caret">▼</span></button>
                    <div id="skill-frontend" class="skill-panel" role="region" aria-labelledby="skill-frontend-btn">
                        <div class="skill-chips">
                            <span class="skill-chip">HTML</span>
                            <span class="skill-chip">CSS</span>
                            <span class="skill-chip">JavaScript</span>
                            <span class="skill-chip">TypeScript</span>
                            <span class="skill-chip">React</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Contact Section -->
    <div class="site-width">
        <section id="contact" class="projects-section contact-panel" aria-labelledby="contact-title">
            <h2 id="contact-title">// Contact</h2>

            <div class="corner-bright corner--tl" aria-hidden="true"></div>
            <div class="corner-bright corner--tr" aria-hidden="true"></div>
            <div class="corner-bright corner--bl" aria-hidden="true"></div>
            <div class="corner-bright corner--br" aria-hidden="true"></div>

            <div class="contact-left" aria-hidden="false">
                <div class="contact-block">
                    <h3>// Contact Info</h3>
                    <ul class="contact-list">
                        <li class="contact-item">
                            <span class="contact-label">Phone:</span>
                            <div class="contact-value">425 - 772 - 7786</div>
                        </li>
                        <li class="contact-item">
                            <span class="contact-label">Email:</span>
                            <div class="contact-value"><a href="mailto:Logtut42@gmail.com">Logtut42@gmail.com</a></div>
                        </li>
                        <li class="contact-item">
                            <span class="contact-label">Linkedin:</span>
                            <div class="contact-value"><a href="https://www.linkedin.com/in/uw-logan-tuttle/" target="_blank" rel="noopener">https://www.linkedin.com/in/uw-logan-tuttle/</a></div>
                        </li>
                        <li class="contact-item">
                            <span class="contact-label">// Resume</span>
                            <div class="contact-value"><a href="https://logantuttle.org/resume" target="_blank" rel="noopener">https://logantuttle.org/resume</a></div>
                        </li>
                    </ul>
                </div>
            </div>

            <form class="contact-form" id="contact-form" action="https://getform.io/f/bmdywdza" method="POST">
                <div class="field-group">
                    <label for="email">Your Email:<span class="required-asterisk" aria-hidden="true">*</span></label>
                    <input type="email" id="email" name="email" placeholder="you@example.com" required aria-required="true" />
                </div>

                <div class="field-group">
                    <label for="subject">Subject:</label>
                    <input type="text" id="subject" name="subject" placeholder="Message Subject" />
                </div>

                <div class="field-group">
                    <label for="message">Message:<span class="required-asterisk" aria-hidden="true">*</span></label>
                    <textarea id="message" name="message" placeholder="Type message...." required aria-required="true"></textarea>
                </div>

                <div class="contact-actions">
                    <button type="submit" class="contact-send" id="contact-send" disabled>send</button>
                </div>
            </form>
        </section>
    </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const root = document.documentElement;
            const layoutRoot = document.getElementById('layout-root');
            const layoutWrapper = layoutRoot ? layoutRoot.parentElement : null;
            if (layoutRoot) {
                const baseWidth = parseFloat(layoutRoot.dataset.designWidth || layoutRoot.scrollWidth);
                const measureAvailableWidth = () => {
                    if (layoutWrapper) {
                        return Math.max(layoutWrapper.clientWidth, 240);
                    }
                    return Math.max(window.innerWidth, 240);
                };
                const updateScale = () => {
                    const availableWidth = measureAvailableWidth();
                    const scale = Math.min(1, availableWidth / baseWidth);
                    root.style.setProperty('--page-scale', scale.toFixed(4));
                    root.style.setProperty('--layout-height', `${(layoutRoot.scrollHeight * scale).toFixed(2)}px`);
                    const gap = layoutRoot.scrollHeight * (1 - scale);
                    root.style.setProperty('--scale-gap', `${Math.max(0, gap).toFixed(2)}px`);
                };
                let resizeScheduled = false;
                const scheduleScaleUpdate = () => {
                    if (resizeScheduled) return;
                    resizeScheduled = true;
                    if (typeof requestAnimationFrame === 'function') {
                        requestAnimationFrame(() => {
                            updateScale();
                            resizeScheduled = false;
                        });
                    } else {
                        updateScale();
                        resizeScheduled = false;
                    }
                };
                updateScale();
                window.addEventListener('resize', scheduleScaleUpdate);
                window.addEventListener('orientationchange', scheduleScaleUpdate);
                if ('ResizeObserver' in window) {
                    const resizeObserver = new ResizeObserver(() => scheduleScaleUpdate());
                    resizeObserver.observe(layoutRoot);
                    if (layoutWrapper) {
                        resizeObserver.observe(layoutWrapper);
                    }
                }
                window.addEventListener('load', scheduleScaleUpdate, { once: true });
            }

            // Skills accordion behavior
            const initSkillsAccordion = () => {
                const skillToggles = Array.from(document.querySelectorAll('.skill-toggle'));
                skillToggles.forEach(btn => {
                    const panelId = btn.getAttribute('aria-controls');
                    const panel = document.getElementById(panelId);
                    const item = btn.closest('.skill-item');
                    if (!panel || !item) return;

                    const open = (animate = true) => {
                        btn.setAttribute('aria-expanded', 'true');
                        item.classList.add('open');
                        // set max-height to scrollHeight for transition
                        panel.style.maxHeight = panel.scrollHeight + 'px';
                    };

                    const close = (animate = true) => {
                        btn.setAttribute('aria-expanded', 'false');
                        item.classList.remove('open');
                        panel.style.maxHeight = '0px';
                    };

                    // click handler
                    btn.addEventListener('click', (e) => {
                        const isOpen = btn.getAttribute('aria-expanded') === 'true';
                        if (isOpen) close(); else open();
                    });

                    // keyboard: allow Enter and Space to toggle
                    btn.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            btn.click();
                        }
                        // Allow Arrow down to move focus to next panel's button
                        if (e.key === 'ArrowDown') {
                            e.preventDefault();
                            const idx = skillToggles.indexOf(btn);
                            const next = skillToggles[Math.min(skillToggles.length - 1, idx + 1)];
                            if (next) next.focus();
                        }
                        if (e.key === 'ArrowUp') {
                            e.preventDefault();
                            const idx = skillToggles.indexOf(btn);
                            const prev = skillToggles[Math.max(0, idx - 1)];
                            if (prev) prev.focus();
                        }
                    });

                    // ensure panels collapse to natural size on window resize
                    window.addEventListener('resize', () => {
                        if (item.classList.contains('open')) {
                            panel.style.maxHeight = panel.scrollHeight + 'px';
                        }
                    });
                });
            };
            initSkillsAccordion();
            // Contact form handling (client-side only)
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                const emailInput = document.getElementById('email');
                const msg = document.getElementById('message');
                const sendBtn = document.getElementById('contact-send');

                const isEmailValid = (value) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value.trim());

                const updateSendButtonState = () => {
                    const emailOk = emailInput && isEmailValid(emailInput.value);
                    const msgOk = msg && msg.value.trim().length > 0;
                    if (sendBtn) {
                        sendBtn.disabled = !(emailOk && msgOk);
                    }
                };

                // initialize button state
                updateSendButtonState();

                // live validation listeners
                if (emailInput) emailInput.addEventListener('input', updateSendButtonState);
                if (msg) msg.addEventListener('input', updateSendButtonState);

                contactForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    // re-check before submit
                    updateSendButtonState();
                    if (!msg || !sendBtn || !emailInput) return;

                    // reset any inline error styling from previous attempts
                    emailInput.style.borderColor = '';
                    msg.style.borderColor = '';

                    const emailValue = emailInput.value.trim();
                    const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailValue);
                    if (!emailValid) {
                        emailInput.style.borderColor = '#ff7a7a';
                        emailInput.focus();
                        return;
                    }

                    if (msg.value.trim().length === 0) {
                        msg.style.borderColor = '#ff7a7a';
                        msg.focus();
                        return;
                    }

                    // Actually submit to getform.io
                    sendBtn.disabled = true;
                    sendBtn.textContent = 'sending...';

                    // Create FormData and submit
                    const formData = new FormData(contactForm);
                    
                    fetch('https://getform.io/f/bmdywdza', {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    })
                    .then(response => {
                        if (response.ok) {
                            sendBtn.textContent = 'sent';
                            sendBtn.style.background = '#66ff99';
                            // reset after a short delay
                            setTimeout(() => {
                                contactForm.reset();
                                sendBtn.disabled = false;
                                sendBtn.textContent = 'send';
                                sendBtn.style.background = '';
                                emailInput.style.borderColor = '';
                                msg.style.borderColor = '';
                            }, 1600);
                        } else {
                            throw new Error('Form submission failed');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        sendBtn.textContent = 'error';
                        sendBtn.style.background = '#ff7a7a';
                        setTimeout(() => {
                            sendBtn.disabled = false;
                            sendBtn.textContent = 'send';
                            sendBtn.style.background = '';
                        }, 2000);
                    });
                });
            }
            const canvas = document.getElementById('matrix-canvas');
            const ctx = canvas.getContext('2d');

            // Set canvas to full screen size
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // Characters used for the rain effect
            const alphabet = '010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101';
            
            const fontSize = 16;
            // Calculate how many columns of characters can fit on the screen
            const columns = canvas.width / fontSize;
            
            // Create an array to track the Y position of each rain drop in each column
            const rainDrops = [];
            for (let x = 0; x < columns; x++) {
                rainDrops[x] = 1;
            }

            // The main animation function
            const drawMatrix = () => {
                // Fill the canvas with a semi-transparent color to create the fading trail effect
                ctx.fillStyle = 'rgba(7, 10, 18, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Set the color and font for the falling characters
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--matrix-blue');
                ctx.font = fontSize + 'px monospace';

                // Loop through each column
                for (let i = 0; i < rainDrops.length; i++) {
                    // Pick a random character from the alphabet
                    const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                    // Draw the character at its current position
                    ctx.fillText(text, i * fontSize, rainDrops[i] * fontSize);

                    // If a drop has reached the bottom of the screen, reset it to the top with a random chance
                    if (rainDrops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        rainDrops[i] = 0;
                    }
                    // Move the drop down for the next frame
                    rainDrops[i]++;
                }
            };

            // Run the animation loop every 33 milliseconds (approx. 30 FPS)
            setInterval(drawMatrix, 33);
            
            // Add an event listener to resize the canvas if the window is resized
            const borderPath = document.querySelector('.id-card-border path');
            if (borderPath) {
                const length = borderPath.getTotalLength();
                borderPath.style.setProperty('--border-length', length);
                borderPath.style.strokeDasharray = length;
                borderPath.style.strokeDashoffset = length;

                const idCard = document.querySelector('.id-card');
                const idCardContainer = document.querySelector('.id-card-container');

                const toggleBorderExpansion = (shouldExpand) => {
                    if (!idCardContainer) return;
                    idCardContainer.classList.toggle('border-expanded', shouldExpand);
                };

                const HOVER_DELAY_MS = 1000;
                const MIN_EXPAND_ASPECT = 17 / 9;
                let hoverTimer = null;
                let pointerActive = false;
                let hoverQualified = false;

                const canExpand = () => (window.innerWidth / window.innerHeight) >= MIN_EXPAND_ASPECT;

                const updateExpansion = () => {
                    const shouldExpand = pointerActive && hoverQualified && canExpand();
                    toggleBorderExpansion(shouldExpand);
                };

                const startHoverTimer = () => {
                    hoverQualified = false;
                    clearTimeout(hoverTimer);
                    if (!pointerActive || !canExpand()) {
                        updateExpansion();
                        return;
                    }
                    hoverTimer = window.setTimeout(() => {
                        hoverQualified = true;
                        updateExpansion();
                    }, HOVER_DELAY_MS);
                };

                const clearHoverTimer = () => {
                    clearTimeout(hoverTimer);
                    hoverTimer = null;
                    hoverQualified = false;
                    updateExpansion();
                };

                if (idCard) {
                    const resetBorder = () => {
                        borderPath.style.animation = 'none';
                        borderPath.style.strokeDashoffset = length;
                        borderPath.getBoundingClientRect();
                        borderPath.style.removeProperty('animation');
                    };

                    borderPath.addEventListener('animationstart', () => {
                        idCard.classList.remove('border-complete');
                        hoverQualified = false;
                        updateExpansion();
                    });

                    borderPath.addEventListener('animationend', () => {
                        if (pointerActive && idCard.matches(':hover')) {
                            idCard.classList.add('border-complete');
                            if (!hoverQualified) {
                                startHoverTimer();
                            } else {
                                updateExpansion();
                            }
                        } else {
                            pointerActive = false;
                            clearHoverTimer();
                        }
                    });

                    idCard.addEventListener('mouseenter', () => {
                        pointerActive = true;
                        resetBorder();
                        idCard.classList.remove('border-complete');
                        startHoverTimer();
                    });

                    idCard.addEventListener('mouseleave', () => {
                        pointerActive = false;
                        resetBorder();
                        idCard.classList.remove('border-complete');
                        clearHoverTimer();
                    });

                    document.addEventListener('visibilitychange', () => {
                        if (document.hidden) {
                            pointerActive = false;
                            clearHoverTimer();
                        }
                    });

                    window.addEventListener('resize', () => {
                        if (!canExpand()) {
                            hoverQualified = false;
                        }
                        if (!pointerActive) {
                            clearHoverTimer();
                        } else if (!canExpand()) {
                            clearHoverTimer();
                        } else {
                            updateExpansion();
                        }
                    });
                }
            }

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            // Smooth-scroll handler for View Projects button
            const viewBtn = document.getElementById('view-projects-btn');
            if (viewBtn) {
                viewBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = document.getElementById('projects');
                    if (target) {
                        // If there's a fixed navbar, account for its height so the
                        // projects title isn't hidden behind it. This computes the
                        // target's Y position and subtracts the navbar height plus a
                        // small extra offset so a few project cards are visible below
                        // the title.
                        const nav = document.querySelector('.navbar');
                        const navHeight = nav ? nav.getBoundingClientRect().height : 0;
                        const extraOffset = 12; // show a little breathing room
                        const targetY = target.getBoundingClientRect().top + window.scrollY - navHeight - extraOffset;
                        window.scrollTo({ top: Math.max(0, targetY), left: 0, behavior: 'smooth' });

                        // Give the projects section keyboard focus for accessibility
                        target.setAttribute('tabindex', '-1');
                        target.focus({ preventScroll: true });
                    } else {
                        // fallback: scroll down by viewport height
                        window.scrollBy({ top: window.innerHeight, left: 0, behavior: 'smooth' });
                    }
                });
            }

            // Scrollspy: highlight nav link for the section in view
            (function initScrollSpy(){
                const nav = document.querySelector('.navbar');
                const navHeight = nav ? nav.getBoundingClientRect().height : 0;
                const links = Array.from(document.querySelectorAll('.nav-links a[href^="#"]'));
                if (!links.length) return;

                // Smooth scroll for nav links
                links.forEach(a => {
                    a.addEventListener('click', (e) => {
                        const href = a.getAttribute('href');
                        if (!href || !href.startsWith('#')) return;
                        const target = document.querySelector(href);
                        if (target) {
                            e.preventDefault();
                            const extraOffset = 12;
                            const targetY = target.getBoundingClientRect().top + window.scrollY - navHeight - extraOffset;
                            window.scrollTo({ top: Math.max(0, targetY), left: 0, behavior: 'smooth' });
                            // focus for accessibility
                            target.setAttribute('tabindex', '-1');
                            target.focus({ preventScroll: true });
                        }
                    });
                });

                // Use IntersectionObserver to detect sections in view
                const idToLink = new Map();
                links.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        idToLink.set(href.slice(1), link);
                    }
                });

                const sections = Array.from(idToLink.keys())
                    .map(id => document.getElementById(id))
                    .filter(Boolean);
                if (!sections.length) return;

                let activeId = null;
                const activateLink = (id) => {
                    if (!id || activeId === id) return;
                    activeId = id;
                    links.forEach(l => l.classList.remove('active'));
                    const link = idToLink.get(id);
                    if (link) {
                        link.classList.add('active');
                    }
                };

                const entryCache = new Map();
                const updateActiveLink = () => {
                    const visible = Array.from(entryCache.values())
                        .filter(entry => entry.isIntersecting)
                        .sort((a, b) => b.intersectionRatio - a.intersectionRatio);

                    if (visible.length) {
                        activateLink(visible[0].target.id);
                        return;
                    }

                    const scrollPos = window.scrollY + navHeight + 16;
                    let fallbackSection = null;
                    for (const section of sections) {
                        if (section.offsetTop <= scrollPos) {
                            if (!fallbackSection || section.offsetTop > fallbackSection.offsetTop) {
                                fallbackSection = section;
                            }
                        }
                    }
                    if (!fallbackSection) {
                        fallbackSection = sections[0];
                    }
                    activateLink(fallbackSection.id);
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        entryCache.set(entry.target.id, entry);
                    });
                    updateActiveLink();
                }, { root: null, rootMargin: `-${Math.round(navHeight)}px 0px -40% 0px`, threshold: [0, 0.25, 0.5, 0.75, 1] });

                sections.forEach(section => observer.observe(section));
                updateActiveLink();
            })();
        });
    </script>

    <!-- Project Filtering Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const legendItems = document.querySelectorAll('.legend .legend-item[data-filter]');
            const projectsGrid = document.querySelector('.projects-grid');
            const projectCards = Array.from(projectsGrid.querySelectorAll('.project-card-link'));
            const resetButton = document.getElementById('legend-reset');
            
            let activeFilters = new Set();

            // Function to update reset button visibility
            function updateResetButton() {
                if (activeFilters.size > 0) {
                    resetButton.classList.add('visible');
                } else {
                    resetButton.classList.remove('visible');
                }
            }

            // Function to reset all filters
            function resetAllFilters() {
                activeFilters.clear();
                legendItems.forEach(item => {
                    item.classList.remove('active');
                    item.setAttribute('aria-pressed', 'false');
                });
                updateResetButton();
                reorganizeProjects();
            }

            // Function to update visual highlighting of project cards
            function updateHighlighting() {
                projectCards.forEach(projectLink => {
                    const projectCard = projectLink.querySelector('.project-card');
                    const categoryDots = projectLink.querySelectorAll('.category-dot');
                    
                    if (activeFilters.size === 0) {
                        // No filters active - remove all highlighting
                        projectCard.classList.remove('highlighted', 'dimmed');
                        // Remove match badge if it exists
                        const existingBadge = projectCard.querySelector('.match-badge');
                        if (existingBadge) existingBadge.remove();
                        return;
                    }
                    
                    // Count how many active filters this project matches
                    let matchCount = 0;
                    activeFilters.forEach(filterCategory => {
                        const hasCategory = Array.from(categoryDots).some(dot => 
                            dot.classList.contains(filterCategory)
                        );
                        if (hasCategory) matchCount++;
                    });
                    
                    // Apply highlighting based on match count
                    if (matchCount > 0) {
                        projectCard.classList.add('highlighted');
                        projectCard.classList.remove('dimmed');
                        
                        // Add or update match badge
                        let badge = projectCard.querySelector('.match-badge');
                        if (!badge) {
                            badge = document.createElement('div');
                            badge.className = 'match-badge';
                            projectCard.querySelector('.project-card-inner').appendChild(badge);
                        }
                        
                        if (matchCount === activeFilters.size && matchCount > 1) {
                            badge.textContent = `All ${matchCount} Match!`;
                        } else if (matchCount > 1) {
                            badge.textContent = `${matchCount} Matches`;
                        } else {
                            badge.textContent = 'Match';
                        }
                    } else {
                        projectCard.classList.remove('highlighted');
                        projectCard.classList.add('dimmed');
                        // Remove badge from non-matching projects
                        const existingBadge = projectCard.querySelector('.match-badge');
                        if (existingBadge) existingBadge.remove();
                    }
                });
            }

            // Function to reorganize projects based on multiple active filters
            function reorganizeProjects() {
                if (activeFilters.size === 0) {
                    // No filters active - restore original order
                    projectsGrid.style.opacity = '0.5';
                    projectsGrid.style.transform = 'scale(0.98)';
                    projectsGrid.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    
                    setTimeout(() => {
                        projectsGrid.innerHTML = '';
                        projectCards.forEach(project => {
                            projectsGrid.appendChild(project);
                        });
                        projectsGrid.style.opacity = '1';
                        projectsGrid.style.transform = 'scale(1)';
                        
                        // Update highlighting to clear all badges and states
                        updateHighlighting();
                    }, 300);
                    return;
                }

                // Sort projects by number of matching categories
                const sortedProjects = [...projectCards].sort((a, b) => {
                    const aCategoriesElements = a.querySelectorAll('.category-dot');
                    const bCategoriesElements = b.querySelectorAll('.category-dot');
                    
                    // Count how many active filters each project matches
                    let aMatchCount = 0;
                    let bMatchCount = 0;
                    
                    activeFilters.forEach(filterCategory => {
                        const aHasCategory = Array.from(aCategoriesElements).some(dot => 
                            dot.classList.contains(filterCategory)
                        );
                        const bHasCategory = Array.from(bCategoriesElements).some(dot => 
                            dot.classList.contains(filterCategory)
                        );
                        
                        if (aHasCategory) aMatchCount++;
                        if (bHasCategory) bMatchCount++;
                    });

                    // Sort by match count (descending) - projects with more matches come first
                    if (aMatchCount !== bMatchCount) {
                        return bMatchCount - aMatchCount;
                    }
                    return 0;
                });

                // Clear and re-append in new order with animation
                projectsGrid.style.opacity = '0.5';
                projectsGrid.style.transform = 'scale(0.98)';
                projectsGrid.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

                setTimeout(() => {
                    projectsGrid.innerHTML = '';
                    sortedProjects.forEach(project => {
                        projectsGrid.appendChild(project);
                    });
                    
                    projectsGrid.style.opacity = '1';
                    projectsGrid.style.transform = 'scale(1)';
                    
                    // Update highlighting after reorganization
                    updateHighlighting();
                }, 300);
            }

            // Handle legend item clicks
            legendItems.forEach(item => {
                const clickHandler = () => {
                    const filterCategory = item.dataset.filter;
                    
                    // Toggle this filter
                    if (activeFilters.has(filterCategory)) {
                        // Remove filter
                        activeFilters.delete(filterCategory);
                        item.classList.remove('active');
                        item.setAttribute('aria-pressed', 'false');
                    } else {
                        // Add filter
                        activeFilters.add(filterCategory);
                        item.classList.add('active');
                        item.setAttribute('aria-pressed', 'true');
                    }
                    
                    // Update reset button visibility
                    updateResetButton();
                    
                    // Reorganize based on all active filters
                    reorganizeProjects();
                };

                // Click handler
                item.addEventListener('click', clickHandler);

                // Keyboard handler
                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        clickHandler();
                    }
                });
            });

            // Reset button handlers
            resetButton.addEventListener('click', resetAllFilters);
            
            resetButton.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    resetAllFilters();
                }
            });
        });
    </script>

    <!-- Three.js and globe initialization -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Globe scene in the rectangular component
        (function() {
            const root = document.getElementById('globe-root');
            if (!root) return;

            const width = root.clientWidth || 250;
            const height = root.clientHeight || 250;

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);
            renderer.domElement.style.width = '100%';
            renderer.domElement.style.height = '100%';
            renderer.domElement.style.display = 'block';
            root.appendChild(renderer.domElement);

            // Get reference to skeleton loader
            const skeleton = document.getElementById('globe-skeleton');
            let globeLoaded = false;

            // Function to hide skeleton when globe is ready
            function hideSkeletonLoader() {
                if (!globeLoaded && skeleton) {
                    globeLoaded = true;
                    skeleton.classList.add('loaded');
                    // Remove skeleton from DOM after fade animation completes
                    setTimeout(() => {
                        if (skeleton && skeleton.parentNode) {
                            skeleton.parentNode.removeChild(skeleton);
                        }
                    }, 600); // match CSS transition duration
                }
            }

            const scene = new THREE.Scene();

            // camera
            const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
            camera.position.set(0, 0, 220);

            // subtle ambient and blue rim light
            const ambient = new THREE.AmbientLight(0x002244, 0.6);
            scene.add(ambient);
            const rim = new THREE.PointLight(0x66b3ff, 1.2, 600);
            rim.position.set(100, 100, 120);
            scene.add(rim);

            // Create globe group. We'll use an Earth texture for landmasses
            const globeGroup = new THREE.Group();

            const geom = new THREE.SphereGeometry(80, 64, 64);

            // Load an equirectangular Earth texture to show landmasses
            const loader = new THREE.TextureLoader();
            loader.crossOrigin = 'anonymous';
            loader.load('https://unpkg.com/three-globe@2.31.1/example/img/earth-blue-marble.jpg', (texture) => {
                // Create a radar-style cyan land mask from the loaded texture by
                // drawing it to a canvas and producing an output where land -> cyan and ocean -> transparent.
                const img = texture.image;
                const w = img.width;
                const h = img.height;

                // Source canvas
                const src = document.createElement('canvas');
                src.width = w;
                src.height = h;
                const sctx = src.getContext('2d');
                sctx.drawImage(img, 0, 0, w, h);
                const srcData = sctx.getImageData(0, 0, w, h).data;

                // Output canvas: cyan where brightness indicates land
                const out = document.createElement('canvas');
                out.width = w;
                out.height = h;
                const octx = out.getContext('2d');
                const outImg = octx.createImageData(w, h);

                // Detect land by comparing red/green vs blue and ignore bright white clouds.
                // Use a lower threshold and then dilate the mask to fill small gaps so continents render solidly.
                for (let i = 0; i < w * h; i++) {
                    const r = srcData[i * 4 + 0];
                    const g = srcData[i * 4 + 1];
                    const b = srcData[i * 4 + 2];

                    // If pixel is very bright white, it's likely a cloud – skip it
                    if (r > 240 && g > 240 && b > 240) {
                        outImg.data[i * 4 + 0] = 0;
                        outImg.data[i * 4 + 1] = 0;
                        outImg.data[i * 4 + 2] = 0;
                        outImg.data[i * 4 + 3] = 0;
                        continue;
                    }

                    // Landness: land has more red/green relative to blue in this texture.
                    // For blue marble texture, land is brownish/greenish (higher R+G) vs ocean which is blue (higher B)
                    const landness = ((r + g) / 2) - b;

                    // Lower threshold to be inclusive; dilation will fill remaining holes
                    if (landness > 5) {
                        // lighter, slightly warmer cyan for land -> increased R/G and full B
                        outImg.data[i * 4 + 0] = 150; // R
                        outImg.data[i * 4 + 1] = 235; // G
                        outImg.data[i * 4 + 2] = 255; // B
                        outImg.data[i * 4 + 3] = 245; // A (more opaque)
                    } else {
                        outImg.data[i * 4 + 0] = 0;
                        outImg.data[i * 4 + 1] = 0;
                        outImg.data[i * 4 + 2] = 0;
                        outImg.data[i * 4 + 3] = 0;
                    }
                }

                // Morphological dilation: two passes to fill small gaps/holes in the land mask
                const alphaMap = new Uint8ClampedArray(w * h);
                for (let pass = 0; pass < 2; pass++) {
                    // copy current alpha into alphaMap
                    for (let i = 0; i < w * h; i++) alphaMap[i] = outImg.data[i * 4 + 3];

                    for (let y = 1; y < h - 1; y++) {
                        for (let x = 1; x < w - 1; x++) {
                            const idx = y * w + x;
                            if (alphaMap[idx] === 0) {
                                // check 8 neighbors
                                const neighbors = [
                                    alphaMap[idx - 1], alphaMap[idx + 1],
                                    alphaMap[idx - w], alphaMap[idx + w],
                                    alphaMap[idx - w - 1], alphaMap[idx - w + 1],
                                    alphaMap[idx + w - 1], alphaMap[idx + w + 1]
                                ];
                                for (let n = 0; n < neighbors.length; n++) {
                                    if (neighbors[n] > 0) {
                                        // set this pixel to land color
                                        // apply the same lighter, more opaque land tone when dilating
                                        outImg.data[idx * 4 + 0] = 150;
                                        outImg.data[idx * 4 + 1] = 235;
                                        outImg.data[idx * 4 + 2] = 255;
                                        outImg.data[idx * 4 + 3] = 245;
                                        break;
                                    }
                                }
                            }
                        }
                    }
                }

                // Make the fill semi-transparent and create an outline map for perimeter pixels
                // make the overall fill a touch more opaque
                const fillAlpha = 245; // out of 255
                const outlineImg = octx.createImageData(w, h);
                for (let y = 1; y < h - 1; y++) {
                    for (let x = 1; x < w - 1; x++) {
                        const idx = y * w + x;
                        const a = outImg.data[idx * 4 + 3];
                        if (a > 0) {
                            // set semi-transparent fill
                            outImg.data[idx * 4 + 3] = fillAlpha;
                            // if any neighbor is transparent, mark as outline
                            const neighbors = [
                                outImg.data[(idx - 1) * 4 + 3], outImg.data[(idx + 1) * 4 + 3],
                                outImg.data[(idx - w) * 4 + 3], outImg.data[(idx + w) * 4 + 3],
                                outImg.data[(idx - w - 1) * 4 + 3], outImg.data[(idx - w + 1) * 4 + 3],
                                outImg.data[(idx + w - 1) * 4 + 3], outImg.data[(idx + w + 1) * 4 + 3]
                            ];
                            let isEdge = false;
                            for (let n = 0; n < neighbors.length; n++) {
                                if (neighbors[n] === 0) { isEdge = true; break; }
                            }
                            if (isEdge) {
                                // outline color: slightly lighter cyan
                                outlineImg.data[idx * 4 + 0] = 70;  // R
                                outlineImg.data[idx * 4 + 1] = 220; // G
                                outlineImg.data[idx * 4 + 2] = 255; // B
                                outlineImg.data[idx * 4 + 3] = 255; // A
                            }
                        }
                    }
                }

                // Put the semi-transparent fill into its own canvas so landmasses glow as a solid layer
                octx.putImageData(outImg, 0, 0);

                // Create textures from canvases
                const landMaskTex = new THREE.CanvasTexture(out);
                landMaskTex.colorSpace = THREE.SRGBColorSpace;
                landMaskTex.needsUpdate = true;

                // Base dark sphere
                const baseMat = new THREE.MeshPhongMaterial({ color: 0x021b36, shininess: 12, specular: 0x003366, emissive: 0x001a32, emissiveIntensity: 0.35 });
                const baseMesh = new THREE.Mesh(geom, baseMat);
                globeGroup.add(baseMesh);

                // Land overlay with a light-blue tint and soft transparency
                // lighter tint and increased opacity so the land reads brighter and more solid
                const landMat = new THREE.MeshBasicMaterial({ map: landMaskTex, transparent: true, opacity: 0.95, depthWrite: false, color: 0x96ebff });
                const landMesh = new THREE.Mesh(geom, landMat);
                globeGroup.add(landMesh);

                // Outline canvas keeps edges crisp without affecting the interior fill
                const outlineCanvas = document.createElement('canvas');
                outlineCanvas.width = w;
                outlineCanvas.height = h;
                const outlineCtx = outlineCanvas.getContext('2d');
                // Transfer only the edge pixels so the land interior stays softly filled
                outlineCtx.putImageData(outlineImg, 0, 0);
                const outlineTex = new THREE.CanvasTexture(outlineCanvas);
                outlineTex.colorSpace = THREE.SRGBColorSpace;
                outlineTex.needsUpdate = true;
                const outlineMat = new THREE.MeshBasicMaterial({ map: outlineTex, blending: THREE.AdditiveBlending, transparent: true, opacity: 0.95, depthWrite: false });
                const outlineMesh = new THREE.Mesh(geom, outlineMat);
                globeGroup.add(outlineMesh);

                // Very subtle wire overlay to keep cyber aesthetic
                const lowWireGeom = new THREE.WireframeGeometry(new THREE.SphereGeometry(80, 28, 28));
                const lowWire = new THREE.LineSegments(lowWireGeom, new THREE.LineBasicMaterial({ color: 0x3caeff, opacity: 0.15, transparent: true }));
                globeGroup.add(lowWire);

                // Hide skeleton loader once texture is loaded and globe is rendered
                hideSkeletonLoader();
            }, undefined, (err) => {
                // If texture fails to load, fall back to a low-opacity wire sphere
                const fallbackMat = new THREE.MeshBasicMaterial({ color: 0x002244, opacity: 0.15, transparent: true });
                const fallback = new THREE.Mesh(geom, fallbackMat);
                globeGroup.add(fallback);
                const lowWireGeom = new THREE.WireframeGeometry(new THREE.SphereGeometry(80, 32, 32));
                const lowWire = new THREE.LineSegments(lowWireGeom, new THREE.LineBasicMaterial({ color: 0x3caeff, opacity: 0.15, transparent: true }));
                globeGroup.add(lowWire);

                // Hide skeleton loader even on fallback
                hideSkeletonLoader();
            });

            scene.add(globeGroup);

            // Highlight point for Seattle: lat/lon -> spherical
            function latLonToVector3(lat, lon, radius) {
                const phi = (90 - lat) * (Math.PI / 180);
                const theta = (lon + 180) * (Math.PI / 180);
                const x = -radius * Math.sin(phi) * Math.cos(theta);
                const z = radius * Math.sin(phi) * Math.sin(theta);
                const y = radius * Math.cos(phi);
                return new THREE.Vector3(x, y, z);
            }

            // Seattle coordinates approx (47.6062 N, -122.3321 W)
            const seattlePos = latLonToVector3(47.6062, -122.3321, 80.5);

            const seattleMarkerGeom = new THREE.SphereGeometry(2.5, 8, 8);
            const seattleMat = new THREE.MeshBasicMaterial({ color: 0xff4444 });
            const seattleMarker = new THREE.Mesh(seattleMarkerGeom, seattleMat);
            seattleMarker.position.copy(seattlePos);
            globeGroup.add(seattleMarker);

            // small ring around Seattle
            const ringGeom = new THREE.RingGeometry(3.2, 4.4, 32);
            const ringMat = new THREE.MeshBasicMaterial({ color: 0xff6666, side: THREE.DoubleSide, transparent: true, opacity: 0.0 });
            const ring = new THREE.Mesh(ringGeom, ringMat);
            // orient ring so it's tangent to globe
            ring.position.copy(seattlePos.clone().multiplyScalar(1.001));
            ring.lookAt(new THREE.Vector3(0,0,0));
            globeGroup.add(ring);

            // Compute center quaternion so Seattle faces the camera initially
            const seattleDir = seattlePos.clone().normalize();
            const cameraForward = new THREE.Vector3(0, 0, 1); // camera sits at +z looking at origin
            const centerQuat = new THREE.Quaternion().setFromUnitVectors(seattleDir, cameraForward);
            // Apply initial centering
            globeGroup.quaternion.copy(centerQuat);

            // Animation and hover behavior
            let hoverActive = false;
            const hoverRotationSpeed = 0.012; // radians per frame while hovered (tune as needed)

            // Update Seattle label position in the HUD SVG (use world position)
            const seattleLabel = document.getElementById('seattle-label');
            function updateLabel() {
                const worldPos = new THREE.Vector3();
                seattleMarker.getWorldPosition(worldPos);
                worldPos.project(camera);
                const x = (worldPos.x * 0.5 + 0.5) * root.clientWidth;
                const y = (-worldPos.y * 0.5 + 0.5) * root.clientHeight;
                const svgX = (x / root.clientWidth) * 250;
                const svgY = (y / root.clientHeight) * 250;

                // Offset the label slightly left and slightly down from the projected point
                // to match requested adjustment (move down and left)
                const labelOffsetX = -56; // tiny additional left nudge
                const labelOffsetY = 0; // slight upward nudge (0 = aligned to projection)

                const labelX = svgX + labelOffsetX;
                const labelY = svgY + labelOffsetY;

                if (seattleLabel) {
                    seattleLabel.setAttribute('x', labelX.toString());
                    seattleLabel.setAttribute('y', (labelY + 2).toString()); // smaller baseline tweak
                }

                // Update connector line within the HUD SVG (from marker to label),
                // but clamp the connector's visible length so it does NOT increase beyond maxLen.
                const connector = document.getElementById('seattle-connector');
                if (connector) {
                    const dx = labelX - svgX;
                    const dy = labelY - svgY;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    const maxLen = 8; // much shorter visible connector length in SVG pixels

                    let endX = labelX;
                    let endY = labelY;

                    if (dist > maxLen) {
                        const t = maxLen / dist;
                        endX = svgX + dx * t;
                        endY = svgY + dy * t;
                    }

                    connector.setAttribute('x1', svgX.toString());
                    connector.setAttribute('y1', svgY.toString());
                    connector.setAttribute('x2', endX.toString());
                    connector.setAttribute('y2', endY.toString());
                }
            }

            // Ensure the projects grid width matches the ID card container's computed width
            const projectsGrid = document.querySelector('.projects-grid');
            const idCardContainer = document.querySelector('.id-card-container');
            function syncProjectsGridWidth() {
                if (!projectsGrid || !idCardContainer) return;
                const w = idCardContainer.getBoundingClientRect().width;
                // ensure grid doesn't exceed site container (use site-width wrapper if present)
                const siteWrapper = document.querySelector('.site-width');
                const maxW = siteWrapper ? siteWrapper.getBoundingClientRect().width : w;
                projectsGrid.style.width = Math.min(w, maxW) + 'px';
                projectsGrid.style.margin = '0 auto';
            }
            // run once and on resize to keep alignment exact
            syncProjectsGridWidth();
            window.addEventListener('resize', syncProjectsGridWidth);

            // Resize handling
            function onResize() {
                const w = root.clientWidth;
                const h = root.clientHeight;
                renderer.setSize(w, h);
                camera.aspect = w / h;
                camera.updateProjectionMatrix();
            }

            window.addEventListener('resize', onResize);

            const comp = document.getElementById('globe-component');
            if (comp) {
                comp.addEventListener('mouseenter', () => {
                    hoverActive = true;
                });
                comp.addEventListener('mouseleave', () => {
                    hoverActive = false;
                });
            }

            // Animate loop: rotate only when hovered; otherwise slerp back to center quaternion
            const animate = function() {
                requestAnimationFrame(animate);

                // ring kept transparent; no pulsing so it remains invisible
                const t = Date.now() * 0.002; // time kept for other animations if needed

                if (hoverActive) {
                    // rotate around world's Y axis relative to group
                    const q = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,1,0), hoverRotationSpeed);
                    globeGroup.quaternion.multiply(q);
                } else {
                    // smoothly return to center quaternion and stop
                    globeGroup.quaternion.slerp(centerQuat, 0.12);
                }

                updateLabel();
                renderer.render(scene, camera);
            };
            animate();
        })();
    </script>
</body>
</html>

<!-- Extra page spacer to allow more vertical scrolling -->
<style>
/* --- Contact Panel Flex Alignment Fix --- */
.contact-panel {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: flex-start;
    gap: 40px;
    padding: 36px 36px 36px 36px;
    background: linear-gradient(120deg, rgba(10,18,32,0.98) 80%, rgba(0,63,255,0.04) 100%);
    border-radius: 14px;
    box-shadow: 0 0 32px 0 rgba(0,63,255,0.10) inset, 0 0 0 2px rgba(0,63,255,0.08);
    position: relative;
    min-height: 420px;
}

    .contact-left {
        flex: 0 1 300px;
        max-width: 340px;
        min-width: 220px;
        margin-right: 0;
        background: none;
        /* add internal padding so content has more breathing room */
        padding: 18px 18px 20px 18px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 12px; /* ensure children have comfortable separation */
    }

    .contact-form {
        flex: 1 1 640px;
        max-width: none;
        min-width: 0;
        margin-left: 0;
        background: none;
        /* add internal padding to separate the form from its border */
        padding: 20px 22px 22px 22px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 14px; /* spacing between stacked form sections */
    }

    /* Ensure the contact section's H2 sits above both columns and centers */
    #contact-title {
        flex: 0 0 100%;
        width: 100%;
        text-align: center;
        margin: 0 0 32px 0;
        font-size: 1.6rem;
        letter-spacing: 1px;
        color: #dff4ff;
        text-shadow: 0 0 12px rgba(0,63,255,0.45);
    }

/* Align the right form heading with the left block title */
.contact-form h3 {
    margin: 0 0 12px 0;
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: 1px;
    color: #e8f1ff;
    text-shadow: 0 0 8px rgba(0,63,255,0.55);
}

/* Increase spacing between fields so inputs don't feel cramped */
.contact-form .field-group {
    margin-bottom: 18px;
}

/* Give inputs and labels more internal spacing for readability */
.contact-form input[type="text"],
.contact-form input[type="email"],
.contact-form textarea,
.contact-form select {
    padding: 10px 12px;
}

.contact-form input[type="text"]#subject {
    height: 56px;
    font-size: 1.1rem;
    text-align: center;
}

.contact-form textarea#message {
    min-height: 220px;
    font-size: 1rem;
}

@media (max-width: 1299px) {
    .contact-panel {
        flex-direction: column !important;
        gap: 24px;
        padding: 28px 20px 28px 20px;
    }
    .contact-left, .contact-form {
        max-width: 100% !important;
        min-width: 0 !important;
        flex: 1 1 auto !important;
    }
    
    /* Two-column layout for contact info items */
    .contact-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px 20px;
    }
}

@media (max-width: 980px) {
    .contact-panel {
        padding: 18px 8px 18px 8px;
    }
}

/* Remove previous centering of .contact-left; instead offset only the form downward */
.contact-form { margin-top: 42px; }
@media (max-width: 980px) { .contact-form { margin-top: 36px; } }

@media (min-width: 901px) {
    .contact-panel {
        align-items: stretch;
    }

    .contact-left,
    .contact-form {
        align-self: stretch;
    }

    .contact-form {
        margin-top: 0;
        min-height: 100%;
        height: 100%;
    }

    #contact-title {
        font-size: 2.4rem;
        margin-top: 28px;
        margin-bottom: 36px;
        text-align: center;
    }
}

/* --- Improved spacing for contact info on narrower screens (keep 2 columns) --- */
/* At tablet widths tighten panel but give items more breathing room */
@media (max-width: 760px) {
    .contact-list {
        /* Increase both row & column gaps for clearer separation */
        gap: 26px 34px !important;
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .contact-item {
        /* Allow internal wrapping without items feeling cramped */
        line-height: 1.25;
    }
}

/* Very small phones: keep two columns but exaggerate vertical spacing for tap targets */
@media (max-width: 520px) {
    .contact-list {
        gap: 30px 32px !important; /* More vertical rhythm */
        padding: 0 4px;            /* Slight horizontal breathing room */
    }
    .contact-item {
        /* Optional subtle separation using internal padding */
        padding-top: 2px;
    }
    .contact-label { margin-bottom: 2px; }
    .contact-value { word-break: break-word; }
}

/* Ultra-narrow devices: maintain two columns, reduce horizontal gap slightly to prevent wrapping while keeping vertical spacing */
@media (max-width: 430px) {
    .contact-list {
        column-gap: 20px !important; /* Slightly tighter horizontally */
        row-gap: 32px !important;    /* Maintain generous vertical spacing */
    }
}

/* Increase text sizes in contact section by 1.5x on screens 900px or less */
@media (max-width: 900px) {
    #contact-title {
        font-size: 3.6rem; /* 2.4rem * 1.5 */
        margin-top: 40px;
    }
    .contact-left h3,
    .contact-form h3 {
        font-size: 2.8125rem; /* 1.875rem * 1.5 */
    }
    .contact-label {
        font-size: 2.025rem; /* 1.35rem * 1.5 */
    }
    .contact-form label {
        font-size: 2.07rem; /* 1.38rem * 1.5 */
    }
    .contact-value {
        font-size: 2.25rem; /* 1.5rem * 1.5 */
    }
    .contact-left,
    .contact-form {
        width: calc(100% - 36px);
        margin: 0 auto;
    }
    .contact-left {
        padding-left: 16px;
        padding-right: 16px;
    }
    .contact-form {
        padding-left: 18px;
        padding-right: 18px;
    }
    .contact-form select,
    .contact-form textarea,
    .contact-form input[type="text"],
    .contact-form input[type="email"] {
        font-size: 2.205rem; /* 1.47rem * 1.5 */
        padding: 22.5px 27px; /* 15px * 1.5, 18px * 1.5 */
        min-height: 78px; /* 52px * 1.5 */
    }
    .contact-form textarea {
        min-height: 480px; /* 320px * 1.5 */
    }
    .contact-form ::placeholder {
        font-size: 2.205rem; /* Match input font size */
    }
    .contact-send {
        font-size: 2.295rem; /* 1.53rem * 1.5 */
        padding: 21px 27px; /* 14px * 1.5, 18px * 1.5 */
    }
}
</style>

<!-- removed artificial spacer to prevent excessive bottom whitespace -->






































<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vega Chart</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Root Variables --- */
        :root {
            --color-bg: #000510;
            --color-bg-lighter: #0a1220;
            --color-primary: #00a3ff;
            --color-primary-bright: #50aaff;
            --color-accent: #00ffaa;
            --color-text: #e8f1ff;
            --color-text-dim: #8ea3c0;
            --color-border: rgba(0,163,255,0.3);
            --color-glow: rgba(0,163,255,0.4);
        }

        /* --- Basic Setup --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: 'Roboto Mono', monospace;
        }

        body {
            background: linear-gradient(135deg, 
                #000510 0%, 
                #001430 25%, 
                #000a18 50%, 
                #001845 75%, 
                #000510 100%);
            background-attachment: fixed;
            color: var(--color-text);
            position: relative;
            min-height: 100vh;
        }

        /* --- Matrix Rain Canvas --- */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.15;
        }

        /* --- Navigation Bar --- */
        .navbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 16px 32px;
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 50px;
            box-shadow: 0 0 30px rgba(0,163,255,0.2), 0 4px 20px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: all 0.3s ease;
            max-width: 95%;
            width: max-content;
        }

        .navbar:hover {
            box-shadow: 0 0 40px rgba(0,163,255,0.35), 0 6px 25px rgba(0,0,0,0.6);
            border-color: rgba(0,163,255,0.5);
        }

        .nav-brand {
            font-size: 1.1rem;
            font-weight: 700;
            color: #003fff;
            text-decoration: none;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .nav-brand:hover {
            color: var(--color-accent);
            transform: translateY(-2px);
        }

        /* Custom LT monogram logo styling */
        .nav-brand .lt-logo { 
            width: 34px; 
            height: 34px; 
            display: block; 
        }
        .nav-brand .lt-logo g { 
            stroke-linecap: round; 
            stroke-linejoin: round; 
        }

        .nav-links {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .nav-links a {
            color: var(--color-text);
            text-decoration: none;
            font-size: 0.9rem;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--color-accent);
            background: rgba(0,163,255,0.1);
            transform: translateY(-2px);
        }

        .external-link-icon {
            display: inline-block;
            width: 14px;
            height: 14px;
            margin-left: 1px;
            opacity: 1;
            transition: all 0.3s ease;
            vertical-align: middle;
        }

        .nav-links a:hover .external-link-icon {
            transform: translate(2px, -2px);
        }

        /* --- Main Content Wrapper --- */
        .content-wrapper {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 120px auto 60px;
            padding: 0 40px;
        }

        /* --- Project Header --- */
        .project-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .project-header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: var(--color-primary-bright);
            letter-spacing: 3px;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(0,163,255,0.6);
        }

        .project-subtitle {
            font-size: 1.1rem;
            color: var(--color-text-dim);
            letter-spacing: 1px;
        }

        /* --- Carousel Section --- */
        .carousel-section {
            position: relative;
            margin-bottom: 50px;
            width: 100%;
        }

        .carousel-container {
            width: 100%;
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 0 40px rgba(0,163,255,0.2), 0 8px 32px rgba(0,0,0,0.5);
            overflow: hidden;
            cursor: grab;
            user-select: none;
        }

        .carousel-container.is-dragging {
            cursor: grabbing;
        }

        .carousel-track {
            position: relative;
            display: flex;
            width: 100%;
            transition: transform 0.6s ease;
            will-change: transform;
            touch-action: pan-y;
        }

        .carousel-track.is-dragging {
            transition: none;
        }

        .carousel-slide {
            flex: 0 0 100%;
            width: 100%;
            opacity: 0.35;
            transition: opacity 0.4s ease;
        }

        .carousel-slide.active {
            opacity: 1;
        }

        .image-placeholder {
            width: 85%;
            aspect-ratio: 16/9;
            background: rgba(0,163,255,0.05);
            border: 2px solid rgba(0,163,255,0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .image-placeholder:hover {
            background: rgba(0,163,255,0.08);
            border-color: rgba(0,163,255,0.4);
        }

        .image-placeholder svg {
            opacity: 0.4;
            stroke: var(--color-primary);
        }

        .image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            pointer-events: none;
            user-select: none;
            -webkit-user-drag: none;
        }

        .image-caption {
            text-align: center;
            font-size: 0.95rem;
            font-style: italic;
            color: var(--color-text-dim);
            margin-bottom: 20px;
            letter-spacing: 0.5px;
            transition: opacity 0.35s ease;
            min-height: 1.5rem;
        }

        .image-caption.is-transitioning {
            opacity: 0;
        }

        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(0,163,255,0.3);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }

        .dot:hover {
            background: rgba(0,163,255,0.5);
            transform: scale(1.2);
        }

        .dot.active {
            background: var(--color-primary);
            box-shadow: 0 0 15px rgba(0,163,255,0.8);
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--color-primary);
            box-shadow: 0 0 20px rgba(0,163,255,0.2);
            z-index: 10;
        }

        .carousel-nav.prev {
            left: -70px;
        }

        .carousel-nav.next {
            right: -70px;
        }

        .carousel-nav:hover {
            background: linear-gradient(135deg, rgba(0,163,255,0.2) 0%, rgba(0,255,170,0.1) 100%);
            border-color: var(--color-accent);
            box-shadow: 0 0 30px rgba(0,163,255,0.4);
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-nav svg {
            stroke: currentColor;
        }

        /* --- Specs Grid --- */
        .specs-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 60px; /* doubled gap for more room */
            margin-bottom: 100px;
        }

        @media (min-width: 1000px) {
            .specs-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .spec-box {
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 16px;
            padding: 60px; /* doubled padding */
            box-shadow: 0 0 40px rgba(0,163,255,0.2), 0 8px 32px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .spec-box:hover {
            border-color: rgba(0,163,255,0.5);
            box-shadow: 0 0 50px rgba(0,163,255,0.3), 0 10px 40px rgba(0,0,0,0.6);
            transform: translateY(-3px);
        }

        .spec-box h3 {
            font-size: 1.3rem;
            color: var(--color-primary-bright);
            letter-spacing: 1.5px;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(0,163,255,0.5);
        }

        .spec-box ul {
            list-style: none;
            padding-left: 0;
        }

        .spec-box li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 36px; /* doubled spacing */
            line-height: 2.2; /* more airy spacing */
            color: var(--color-text);
            font-size: 1rem;
        }

        .spec-box li::before {
            content: '▹';
            position: absolute;
            left: 0;
            color: var(--color-accent);
            font-size: 1.2rem;
        }

        /* Prominent spec link styling */
        .spec-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #0b66ff; /* bright blue */
            font-size: 1.05rem;
            font-weight: 700;
            padding: 8px 12px;
            border-radius: 8px;
            background: linear-gradient(90deg, rgba(11,102,255,0.08), rgba(0,163,255,0.04));
            border: 1px solid rgba(11,102,255,0.12);
            text-decoration: none;
            box-shadow: 0 6px 18px rgba(11,102,255,0.12);
            transition: transform 0.16s ease, box-shadow 0.16s ease;
        }

        .spec-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(11,102,255,0.18);
            color: #0b66ff;
        }

        /* Two-column skills list for spec box */
        .skills-columns {
            column-count: 2;
            column-gap: 48px;
            list-style: none;
            padding-left: 0;
            margin: 0;
        }

        .skills-columns li {
            position: relative;
            padding-left: 26px;
            margin-bottom: 18px;
            line-height: 1.6;
            color: var(--color-text);
            font-size: 1rem;
            break-inside: avoid;
        }

        .skills-columns li::before {
            content: '▹';
            position: absolute;
            left: 0;
            color: var(--color-accent);
            font-size: 1.15rem;
            text-shadow: 0 0 12px rgba(0, 255, 170, 0.35);
        }

        @media (max-width: 1000px) {
            .skills-columns {
                column-count: 1;
            }
        }

        /* --- Description Section --- */
        .description-section {
            background: linear-gradient(135deg, rgba(10,18,32,0.95) 0%, rgba(0,20,48,0.92) 100%);
            border: 2px solid rgba(0,163,255,0.3);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 0 40px rgba(0,163,255,0.2), 0 8px 32px rgba(0,0,0,0.5);
            margin-bottom: 60px;
        }

        .description-section h2 {
            font-size: 1.8rem;
            color: var(--color-primary-bright);
            letter-spacing: 2px;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 0 0 15px rgba(0,163,255,0.5);
        }

        .description-content {
            background: rgba(0,163,255,0.03);
            border: 1px solid rgba(0,163,255,0.15);
            border-radius: 12px;
            padding: 30px;
        }

        .description-content p {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--color-text);
            margin-bottom: 20px;
        }

        .description-content p:last-child {
            margin-bottom: 0;
        }

        .description-content strong {
            display: block;
            font-size: 1.3rem;
            color: var(--color-primary-bright);
            letter-spacing: 1.5px;
            margin-top: 35px;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0,163,255,0.4);
        }

        .description-content p:first-child strong {
            margin-top: 0;
        }

        /* --- Responsive Design --- */
        
        /* Medium screens: adjust navbar layout */
        @media (max-width: 1024px) {
            .navbar {
                gap: 16px;
                padding: 12px 24px;
            }

            .nav-brand {
                font-size: 1rem;
            }

            .nav-links {
                gap: 12px;
            }

            .nav-links a {
                font-size: 0.85rem;
                padding: 6px 10px;
            }
        }

        /* Smaller screens: wrap navbar into two rows */
        @media (max-width: 900px) {
            .navbar {
                flex-wrap: wrap;
                justify-content: center;
                padding: 14px 20px;
                gap: 12px;
            }

            .nav-brand {
                width: 100%;
                justify-content: center;
                margin-bottom: 6px;
            }

            .nav-links {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
            }

            .nav-links a {
                font-size: 0.8rem;
                padding: 6px 10px;
            }

            .description-section {
                padding: 25px 20px;
            }

            .description-content {
                padding: 10px;
            }

            .description-content p {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 1300px) {
            .carousel-section .carousel-nav.prev,
            .carousel-section .carousel-nav.next {
                position: absolute;
                top: 45%;
                z-index: 10;
            }

            .carousel-section .carousel-nav.prev {
                left: 10px;
            }

            .carousel-section .carousel-nav.next {
                right: 10px;
            }
        }

        @media (max-width: 768px) {
            .content-wrapper {
                margin: 160px auto 40px;
                padding: 0 20px;
            }

            .project-header h1 {
                font-size: 2rem;
            }

            .project-subtitle {
                font-size: 0.95rem;
            }

            .carousel-section {
                flex-direction: column;
                gap: 15px;
            }

            .carousel-nav {
                width: 45px;
                height: 45px;
            }

            .carousel-container {
                padding: 20px;
            }

            .specs-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .skills-columns {
                column-count: 1;
                column-gap: 0;
            }

            .spec-box {
                padding: 25px;
            }

            .description-section {
                padding: 30px 25px;
            }
        }

        /* Mobile screens: more compact navbar */
        @media (max-width: 600px) {
            .navbar {
                top: 10px;
                padding: 12px 16px;
                gap: 10px;
                width: 95%;
            }

            .nav-brand {
                font-size: 0.9rem;
                letter-spacing: 1px;
            }

            .nav-brand .lt-logo {
                width: 28px;
                height: 28px;
            }

            .nav-links {
                gap: 6px;
            }

            .nav-links a {
                font-size: 0.75rem;
                padding: 5px 8px;
                letter-spacing: 0.5px;
            }

            .external-link-icon {
                width: 12px;
                height: 12px;
            }

            .content-wrapper {
                margin: 180px auto 40px;
                padding: 0 15px;
            }

            .carousel-container {
                padding: 15px;
            }

            .image-placeholder {
                width: 100%;
            }

            .carousel-nav {
                width: 40px;
                height: 40px;
            }

            .carousel-section .carousel-nav.prev {
                left: 5px;
            }

            .carousel-section .carousel-nav.next {
                right: 5px;
            }
        }

        /* Very small screens: ultra compact */
        @media (max-width: 450px) {
            .navbar {
                padding: 10px 12px;
            }

            .nav-brand {
                font-size: 0.85rem;
            }

            .nav-links a {
                font-size: 0.7rem;
                padding: 4px 6px;
            }

            .content-wrapper {
                margin: 200px auto 40px;
            }

            .carousel-container {
                padding: 10px;
            }

            .carousel-nav {
                width: 36px;
                height: 36px;
            }

            .carousel-nav svg {
                width: 16px;
                height: 16px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Matrix Rain Canvas -->
    <canvas id="matrix-canvas"></canvas>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="./" class="nav-brand">
            <!-- Futuristic LT Monogram Logo -->
            <svg class="lt-logo" width="34" height="34" viewBox="0 0 64 64" aria-hidden="true" role="img">
                <title>LT Monogram</title>
                <!-- Single-color circle and letters (no glow) -->
                <circle cx="32" cy="32" r="29" stroke="#003fff" stroke-width="2.4" fill="none" />
                <g transform="translate(-5,0)" stroke="#003fff" stroke-width="4" fill="none" class="logo-stroke" stroke-linecap="round" stroke-linejoin="round">
                    <!-- visually nudged left -5px for optical centering -->
                    <path d="M22 22 V42 H36" />
                    <path d="M42 22 H56 M49 22 V42" />
                </g>
            </svg>
            Logan Tuttle.org
        </a>
        <ul class="nav-links">
            <li><a href="./#profile">Profile</a></li>
            <li><a href="./#projects">Projects</a></li>
            <li><a href="./#skills">Skills</a></li>
            <li><a href="./#contact">Contact</a></li>
            <li><a href="/resume">Resume</a></li>
            <li><a href="https://www.linkedin.com/in/uw-logan-tuttle/" target="_blank">
                LinkedIn
                <svg class="external-link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="7" y1="17" x2="17" y2="7"></line>
                    <polyline points="7 7 17 7 17 17"></polyline>
                </svg>
            </a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="content-wrapper">
        <!-- Project Header -->
        <div class="project-header">
            <h1>VegaChart.com</h1>
            <p class="project-subtitle">Website Tool Showcase</p>
        </div>

        <!-- Image Carousel Section -->
        <div class="carousel-section">
            <button class="carousel-nav prev" aria-label="Previous image">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            
            <div class="carousel-container">
                <div class="carousel-track">
                    <div class="carousel-slide active" data-caption="VegaChart interface - Homepage & Chart Builder">
                        <div class="image-placeholder">
                            <img src="vega_1.webp" alt="VegaChart interface screenshot">
                        </div>
                    </div>
                    <div class="carousel-slide" data-caption="Guide Describes Chart Types and Programing Libraries for Less Technical Users">
                        <div class="image-placeholder">
                            <img src="vega_2.webp" alt="VegaChart data upload and settings">
                        </div>
                    </div>
                    <div class="carousel-slide" data-caption="Built In Feedback function in order to generate data for future UX case studies">
                        <div class="image-placeholder">
                            <img src="vega_3.webp" alt="Example chart output">
                        </div>
                    </div>
                    <div class="carousel-slide" data-caption="Original Low fi Mockup, Product Visuals and Functionality were Edited overtime with Figma and Server Previews">
                        <div class="image-placeholder">
                            <img src="vega_4.webp" alt="Export and code output preview">
                        </div>
                    </div>
                </div>
                
                <p class="image-caption" aria-live="polite">VegaChart interface - chart generation workflow</p>
                
                <div class="carousel-dots">
                    <button class="dot active" aria-label="Go to slide 1"></button>
                    <button class="dot" aria-label="Go to slide 2"></button>
                    <button class="dot" aria-label="Go to slide 3"></button>
                    <button class="dot" aria-label="Go to slide 4"></button>
                </div>
            </div>
            
            <button class="carousel-nav next" aria-label="Next image">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Specs and Skills Grid -->
        <div class="specs-grid">
            <div class="spec-box">
                <h3>Project Specs:</h3>
                <ul>
                    <li>Timeline: Aug 2025 - Sep 2025</li>
                    <li>Platform: Web (Mobile & Desktop)</li>
                    <li>Website: <a class="spec-link" href="https://VegaChart.com" target="_blank" rel="noopener noreferrer">VegaChart.com
                        <svg class="external-link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="7" y1="17" x2="17" y2="7"></line>
                            <polyline points="7 7 17 7 17 17"></polyline>
                        </svg>
                    </a></li>
                </ul>
            </div>
            
            <div class="spec-box">
                <h3>Skills Used:</h3>
                <ul class="skills-columns">
                    <li>HTML &amp; CSS</li>
                    <li>JavaScript</li>
                    <li>Python</li>
                    <li>R</li>
                    <li>SQL</li>
                    <li>User flows</li>
                    <li>Wireframing &amp; Prototyping</li>
                    <li>Data visualization</li>
                </ul>
            </div>
        </div>

        <!-- Project Description -->
        <div class="description-section">
            <h2>Project Description</h2>
            <div class="description-content">
                <p>Vega Chart is an open-source web tool that transforms data into custom visualizations through an intuitive, step-by-step interface. Users can upload data files and create personalized graphs with custom labels, columns, and chart types, then export them in their preferred programming language. The project bridges the gap between rapid AI-generated charts and the customization of traditional programming approaches.</p>
                
                <p><strong>Design Philosophy</strong><br>
                I designed Vega Chart to combine the speed of AI tools with the privacy and customization of programming languages. The tool offers a guided experience that maintains advanced control for technical users while providing accessibility for those without strong statistical backgrounds. This dual approach ensures functionality doesn't come at the expense of usability.</p>
                
                <p><strong>User-Centered Features</strong><br>
                The interface adapts to different experience levels through intelligent automation. The system automatically identifies discrete and continuous variables, suggesting appropriate chart types based on data characteristics. Technical users retain granular control while benefiting from accelerated workflows, while novice users receive guidance through complex statistical decisions.</p>
                
                <p><strong>Diverse User Experience</strong><br>
                Vega Chart serves a spectrum of users. From data scientists seeking rapid prototyping to business professionals or students needing clear visualizations without coding expertise. The thoughtful information architecture ensures each user type can efficiently achieve their goals through pathways tailored to their specific needs and technical comfort level.</p>
            </div>
        </div>
    </div>

    <!-- Matrix Rain Animation Script -->
    <script>
        // Matrix Rain Effect
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const matrixChars = '0101010101';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = Math.random() * -100;
        }

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 5, 16, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00a3ff';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = matrixChars.charAt(Math.floor(Math.random() * matrixChars.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 35);

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Carousel functionality
        const track = document.querySelector('.carousel-track');
        const carouselContainer = document.querySelector('.carousel-container');
        const captionEl = document.querySelector('.image-caption');
        const prevBtn = document.querySelector('.carousel-nav.prev');
        const nextBtn = document.querySelector('.carousel-nav.next');
        const dots = Array.from(document.querySelectorAll('.dot'));

        const originalSlides = track ? Array.from(track.children) : [];
        const slideCount = originalSlides.length;

        let currentIndex = slideCount > 1 ? 1 : 0;
        let slideWidth = 0;
        let isDragging = false;
        let dragStartX = 0;
        let dragOffset = 0;
        let activePointerId = null;
        let captionTimeout;
        let isTransitioning = false;
        let navigationTimeout = null;

        if (slideCount > 1 && track) {
            const firstClone = originalSlides[0].cloneNode(true);
            const lastClone = originalSlides[slideCount - 1].cloneNode(true);
            firstClone.classList.remove('active');
            lastClone.classList.remove('active');
            track.insertBefore(lastClone, originalSlides[0]);
            track.appendChild(firstClone);
        }

        const allSlides = track ? Array.from(track.children) : [];

        function getActualIndex(index = currentIndex) {
            if (!slideCount) return 0;
            return (index - 1 + slideCount) % slideCount;
        }

        function syncCaption({ immediate = false } = {}) {
            if (!captionEl || !slideCount) return;
            const activeSlide = originalSlides[getActualIndex()];
            if (!activeSlide) return;
            const newText = activeSlide.dataset.caption || '';
            if (captionEl.textContent === newText) return;
            if (immediate) {
                captionEl.textContent = newText;
                captionEl.classList.remove('is-transitioning');
                return;
            }
            captionEl.classList.add('is-transitioning');
            clearTimeout(captionTimeout);
            captionTimeout = setTimeout(() => {
                captionEl.textContent = newText;
                captionEl.classList.remove('is-transitioning');
            }, 200);
        }

        function calculateSlideWidth() {
            const referenceSlide = originalSlides[0] || allSlides[0];
            slideWidth = referenceSlide ? referenceSlide.getBoundingClientRect().width : 0;
        }

        function moveToCurrentSlide({ animate = true } = {}) {
            if (!track) return;
            
            // Clear any pending navigation
            if (navigationTimeout) {
                clearTimeout(navigationTimeout);
                navigationTimeout = null;
            }
            
            track.style.transition = animate ? 'transform 0.6s ease' : 'none';
            const offset = -currentIndex * slideWidth;
            track.style.transform = `translateX(${offset}px)`;
            
            if (animate) {
                isTransitioning = true;
                navigationTimeout = setTimeout(() => {
                    isTransitioning = false;
                }, 600); // Match transition duration
            }
        }

        function updateActiveStates() {
            if (!slideCount) return;
            const actualIndex = getActualIndex();
            originalSlides.forEach((slide, index) => {
                slide.classList.toggle('active', index === actualIndex);
            });
            allSlides.forEach((slide) => {
                if (!originalSlides.includes(slide)) {
                    slide.classList.remove('active');
                }
            });
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === actualIndex);
            });
            syncCaption();
        }

        function goToIndex(index, options = {}) {
            if (!slideCount || isTransitioning) return;
            currentIndex = index;
            updateActiveStates();
            moveToCurrentSlide(options);
        }

        function showActualSlide(actualIndex, options = {}) {
            if (slideCount <= 1 || isTransitioning) return;
            const normalisedIndex = ((actualIndex % slideCount) + slideCount) % slideCount;
            const currentActualIndex = getActualIndex();

            if (currentActualIndex === slideCount - 1 && normalisedIndex === 0) {
                goToIndex(slideCount + 1, options);
                return;
            }

            if (currentActualIndex === 0 && normalisedIndex === slideCount - 1) {
                goToIndex(0, options);
                return;
            }

            goToIndex(normalisedIndex + 1, options);
        }

        function handleTransitionEnd() {
            if (slideCount <= 1 || !track) return;
            isTransitioning = false;
            if (currentIndex === 0) {
                currentIndex = slideCount;
                moveToCurrentSlide({ animate: false });
            } else if (currentIndex === slideCount + 1) {
                currentIndex = 1;
                moveToCurrentSlide({ animate: false });
            }
        }

        function handlePointerDown(event) {
            if (!track || slideCount <= 1) return;
            
            // Allow dragging to interrupt transitions
            if (isTransitioning) {
                isTransitioning = false;
                if (navigationTimeout) {
                    clearTimeout(navigationTimeout);
                    navigationTimeout = null;
                }
            }
            
            activePointerId = event.pointerId;
            isDragging = true;
            dragStartX = event.clientX;
            dragOffset = 0;
            carouselContainer?.classList.add('is-dragging');
            track.classList.add('is-dragging');
            track.style.transition = 'none';
            track.setPointerCapture?.(activePointerId);
        }

        function handlePointerMove(event) {
            if (!isDragging) return;
            dragOffset = event.clientX - dragStartX;
            const offset = -currentIndex * slideWidth + dragOffset;
            track.style.transform = `translateX(${offset}px)`;
        }

        function endDrag() {
            carouselContainer?.classList.remove('is-dragging');
            track.classList.remove('is-dragging');
            if (slideCount <= 1) return;
            const threshold = slideWidth * 0.2;
            if (dragOffset > threshold) {
                goToIndex(currentIndex - 1);
            } else if (dragOffset < -threshold) {
                goToIndex(currentIndex + 1);
            } else {
                moveToCurrentSlide({ animate: true });
            }
        }

        function handlePointerUp(event) {
            if (!isDragging) return;
            if (activePointerId !== null && track?.hasPointerCapture?.(activePointerId)) {
                track.releasePointerCapture(activePointerId);
            }
            isDragging = false;
            endDrag();
            dragOffset = 0;
            activePointerId = null;
        }

        if (track) {
            track.addEventListener('pointerdown', handlePointerDown);
            track.addEventListener('pointermove', handlePointerMove);
            track.addEventListener('pointerup', handlePointerUp);
            track.addEventListener('pointercancel', handlePointerUp);
            track.addEventListener('pointerleave', (event) => {
                if (isDragging && event.pointerId === activePointerId) {
                    handlePointerUp(event);
                }
            });
            track.addEventListener('transitionend', handleTransitionEnd);
        }

        // Navigation button event listeners
        prevBtn?.addEventListener('click', () => {
            if (slideCount <= 1 || isTransitioning) return;
            goToIndex(currentIndex - 1);
        });

        nextBtn?.addEventListener('click', () => {
            if (slideCount <= 1 || isTransitioning) return;
            goToIndex(currentIndex + 1);
        });

        // Dot navigation
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (isTransitioning) return;
                showActualSlide(index);
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (slideCount <= 1 || isTransitioning) return;
            if (e.key === 'ArrowLeft') {
                goToIndex(currentIndex - 1);
            } else if (e.key === 'ArrowRight') {
                goToIndex(currentIndex + 1);
            }
        });

        window.addEventListener('resize', () => {
            calculateSlideWidth();
            moveToCurrentSlide({ animate: false });
        });

        calculateSlideWidth();
        syncCaption({ immediate: true });
        if (slideCount > 1) {
            moveToCurrentSlide({ animate: false });
        }
        updateActiveStates();
    </script>
</body>
</html>
